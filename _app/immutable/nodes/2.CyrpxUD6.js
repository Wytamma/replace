import{x as yt,s as Fe,y as We,a as Ke,u as Ze,g as Qe,b as Je,r as kt,z as $e,A as Et,B as et,C as pe,e as Te,n as be,o as St,l as Ct,D as De}from"../chunks/scheduler.Cgv0_EMA.js";import{S as Pe,i as He,e as B,s as ke,c as q,a as se,f as Ee,d as A,y as tt,o as U,z as nt,g as ie,h as Y,A as ue,k as fe,q as Be,l as he,n as qe,t as Ue,B as Ce,b as Ne,C as gt,j as mt,D as rt,E as st,F as Rt,G as Me,u as Oe,v as Ae,w as ze,x as xe}from"../chunks/index.DYQGvwbC.js";import{w as Lt,r as Tt}from"../chunks/index.CJna1r78.js";function je(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function It(i,t){const r={},s={},o={$$scope:1};let l=i.length;for(;l--;){const a=i[l],f=t[l];if(f){for(const h in a)h in f||(s[h]=1);for(const h in f)o[h]||(r[h]=f[h],o[h]=1);i[l]=f}else for(const h in a)o[h]=1}for(const a in s)a in r||(r[a]=void 0);return r}const Ve={};function it(i){return i==="local"?localStorage:sessionStorage}function Ge(i,t,r){const s=JSON,o="local";function l(a,f){it(o).setItem(a,s.stringify(f))}if(!Ve[i]){const a=Lt(t,u=>{const w=it(o).getItem(i);w&&u(s.parse(w));{const k=v=>{v.key===i&&u(v.newValue?s.parse(v.newValue):null)};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)}}),{subscribe:f,set:h}=a;Ve[i]={set(u){l(i,u),h(u)},update(u){const w=u(yt(a));l(i,w),h(w)},subscribe:f}}return Ve[i]}Ge("modeOsPrefers",!1);Ge("modeUserPrefers",void 0);Ge("modeCurrent",!1);const _t="(prefers-reduced-motion: reduce)";function Dt(){return window.matchMedia(_t).matches}Tt(Dt(),i=>{{const t=s=>{i(s.matches)},r=window.matchMedia(_t);return r.addEventListener("change",t),()=>{r.removeEventListener("change",t)}}});const Mt=i=>({}),at=i=>({}),Ot=i=>({}),ot=i=>({}),At=i=>({}),lt=i=>({});function ct(i){let t,r,s;const o=i[18].lead,l=Ke(o,i,i[17],lt);return{c(){t=B("div"),l&&l.c(),this.h()},l(a){t=q(a,"DIV",{class:!0});var f=se(t);l&&l.l(f),f.forEach(A),this.h()},h(){U(t,"class",r="dropzone-lead "+i[5])},m(a,f){ie(a,t,f),l&&l.m(t,null),s=!0},p(a,f){l&&l.p&&(!s||f[0]&131072)&&Ze(l,o,a,a[17],s?Je(o,a[17],f,At):Qe(a[17]),lt),(!s||f[0]&32&&r!==(r="dropzone-lead "+a[5]))&&U(t,"class",r)},i(a){s||(fe(l,a),s=!0)},o(a){he(l,a),s=!1},d(a){a&&A(t),l&&l.d(a)}}}function zt(i){let t,r="Upload a file",s;return{c(){t=B("strong"),t.textContent=r,s=Ue(" or drag and drop")},l(o){t=q(o,"STRONG",{"data-svelte-h":!0}),Ce(t)!=="svelte-13uz6lq"&&(t.textContent=r),s=Ne(o," or drag and drop")},m(o,l){ie(o,t,l),ie(o,s,l)},p:be,d(o){o&&(A(t),A(s))}}}function ut(i){let t,r,s;const o=i[18].meta,l=Ke(o,i,i[17],at);return{c(){t=B("small"),l&&l.c(),this.h()},l(a){t=q(a,"SMALL",{class:!0});var f=se(t);l&&l.l(f),f.forEach(A),this.h()},h(){U(t,"class",r="dropzone-meta "+i[7])},m(a,f){ie(a,t,f),l&&l.m(t,null),s=!0},p(a,f){l&&l.p&&(!s||f[0]&131072)&&Ze(l,o,a,a[17],s?Je(o,a[17],f,Mt):Qe(a[17]),at),(!s||f[0]&128&&r!==(r="dropzone-meta "+a[7]))&&U(t,"class",r)},i(a){s||(fe(l,a),s=!0)},o(a){he(l,a),s=!1},d(a){a&&A(t),l&&l.d(a)}}}function xt(i){let t,r,s,o,l,a,f,h,u,w,k,v,g,m,C,L,D=[{type:"file"},{name:i[2]},{class:s="dropzone-input "+i[9]},i[11]()],x={};for(let e=0;e<D.length;e+=1)x=We(x,D[e]);let y=i[13].lead&&ct(i);const M=i[18].message,K=Ke(M,i,i[17],ot),W=K||zt();let _=i[13].meta&&ut(i);return{c(){t=B("div"),r=B("input"),o=ke(),l=B("div"),a=B("div"),y&&y.c(),f=ke(),h=B("div"),W.c(),w=ke(),_&&_.c(),this.h()},l(e){t=q(e,"DIV",{class:!0,"data-testid":!0});var n=se(t);r=q(n,"INPUT",{type:!0,name:!0,class:!0}),o=Ee(n),l=q(n,"DIV",{class:!0});var c=se(l);a=q(c,"DIV",{class:!0});var d=se(a);y&&y.l(d),f=Ee(d),h=q(d,"DIV",{class:!0});var p=se(h);W.l(p),p.forEach(A),w=Ee(d),_&&_.l(d),d.forEach(A),c.forEach(A),n.forEach(A),this.h()},h(){tt(r,x),U(h,"class",u="dropzone-message "+i[6]),U(a,"class",k="dropzone-interface-text "+i[4]),U(l,"class",v="dropzone-interface "+i[8]+" "+i[3]),U(t,"class",g="dropzone "+i[10]),U(t,"data-testid","file-dropzone"),nt(t,"opacity-50",i[12].disabled)},m(e,n){ie(e,t,n),Y(t,r),r.autofocus&&r.focus(),i[32](r),Y(t,o),Y(t,l),Y(l,a),y&&y.m(a,null),Y(a,f),Y(a,h),W.m(h,null),Y(a,w),_&&_.m(a,null),m=!0,C||(L=[ue(r,"change",i[31]),ue(r,"change",i[19]),ue(r,"dragenter",i[20]),ue(r,"dragover",i[21]),ue(r,"dragleave",i[22]),ue(r,"drop",i[23]),ue(r,"click",i[24]),ue(r,"keydown",i[25]),ue(r,"keyup",i[26]),ue(r,"keypress",i[27]),ue(r,"focus",i[28]),ue(r,"focusin",i[29]),ue(r,"focusout",i[30])],C=!0)},p(e,n){tt(r,x=It(D,[{type:"file"},(!m||n[0]&4)&&{name:e[2]},(!m||n[0]&512&&s!==(s="dropzone-input "+e[9]))&&{class:s},e[11]()])),e[13].lead?y?(y.p(e,n),n[0]&8192&&fe(y,1)):(y=ct(e),y.c(),fe(y,1),y.m(a,f)):y&&(Be(),he(y,1,1,()=>{y=null}),qe()),K&&K.p&&(!m||n[0]&131072)&&Ze(K,M,e,e[17],m?Je(M,e[17],n,Ot):Qe(e[17]),ot),(!m||n[0]&64&&u!==(u="dropzone-message "+e[6]))&&U(h,"class",u),e[13].meta?_?(_.p(e,n),n[0]&8192&&fe(_,1)):(_=ut(e),_.c(),fe(_,1),_.m(a,null)):_&&(Be(),he(_,1,1,()=>{_=null}),qe()),(!m||n[0]&16&&k!==(k="dropzone-interface-text "+e[4]))&&U(a,"class",k),(!m||n[0]&264&&v!==(v="dropzone-interface "+e[8]+" "+e[3]))&&U(l,"class",v),(!m||n[0]&1024&&g!==(g="dropzone "+e[10]))&&U(t,"class",g),(!m||n[0]&5120)&&nt(t,"opacity-50",e[12].disabled)},i(e){m||(fe(y),fe(W,e),fe(_),m=!0)},o(e){he(y),he(W,e),he(_),m=!1},d(e){e&&A(t),i[32](null),y&&y.d(),W.d(e),_&&_.d(),C=!1,kt(L)}}}const jt="textarea relative flex justify-center items-center",Ft="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",Pt="flex justify-center items-center text-center";function Ht(i,t,r){let s,o,l;const a=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let f=$e(t,a),{$$slots:h={},$$scope:u}=t;const w=Et(h);let{files:k=void 0}=t,{fileInput:v=void 0}=t,{name:g}=t,{border:m="border-2 border-dashed"}=t,{padding:C="p-4 py-8"}=t,{rounded:L="rounded-container-token"}=t,{regionInterface:D=""}=t,{regionInterfaceText:x=""}=t,{slotLead:y="mb-4"}=t,{slotMessage:M=""}=t,{slotMeta:K="opacity-75"}=t;function W(){return delete f.class,f}function _(b){pe.call(this,i,b)}function e(b){pe.call(this,i,b)}function n(b){pe.call(this,i,b)}function c(b){pe.call(this,i,b)}function d(b){pe.call(this,i,b)}function p(b){pe.call(this,i,b)}function I(b){pe.call(this,i,b)}function J(b){pe.call(this,i,b)}function ae(b){pe.call(this,i,b)}function V(b){pe.call(this,i,b)}function j(b){pe.call(this,i,b)}function E(b){pe.call(this,i,b)}function oe(){k=this.files,r(0,k)}function R(b){Te[b?"unshift":"push"](()=>{v=b,r(1,v)})}return i.$$set=b=>{r(33,t=We(We({},t),et(b))),r(12,f=$e(t,a)),"files"in b&&r(0,k=b.files),"fileInput"in b&&r(1,v=b.fileInput),"name"in b&&r(2,g=b.name),"border"in b&&r(14,m=b.border),"padding"in b&&r(15,C=b.padding),"rounded"in b&&r(16,L=b.rounded),"regionInterface"in b&&r(3,D=b.regionInterface),"regionInterfaceText"in b&&r(4,x=b.regionInterfaceText),"slotLead"in b&&r(5,y=b.slotLead),"slotMessage"in b&&r(6,M=b.slotMessage),"slotMeta"in b&&r(7,K=b.slotMeta),"$$scope"in b&&r(17,u=b.$$scope)},i.$$.update=()=>{r(10,s=`${jt} ${m} ${C} ${L} ${t.class??""}`)},r(9,o=`${Ft}`),r(8,l=`${Pt}`),t=et(t),[k,v,g,D,x,y,M,K,l,o,s,W,f,w,m,C,L,u,h,_,e,n,c,d,p,I,J,ae,V,j,E,oe,R]}class vt extends Pe{constructor(t){super(),He(this,t,Ht,xt,Fe,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var bt={exports:{}};/* @license
Papa Parse
v5.5.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,t){((r,s)=>{i.exports=s()})(Ut,function r(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},o,l=!s.document&&!!s.postMessage,a=s.IS_PAPA_WORKER||!1,f={},h=0,u={};function w(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var c=K(n);c.chunkSize=parseInt(c.chunkSize),n.step||n.chunk||(c.chunkSize=null),this._handle=new C(c),(this._handle.streamer=this)._config=c}).call(this,e),this.parseChunk=function(n,c){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let I=this._config.newline;I||(p=this._config.quoteChar||'"',I=this._handle.guessLineEndings(n,p)),n=[...n.split(I).slice(d)].join(I)}this.isFirstChunk&&_(this._config.beforeFirstChunk)&&(p=this._config.beforeFirstChunk(n))!==void 0&&(n=p),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+n,p=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=p.meta.cursor,d=(this._finished||(this._partialLine=d.substring(n-this._baseIndex),this._baseIndex=n),p&&p.data&&(this._rowCount+=p.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),a)s.postMessage({results:p,workerId:u.WORKER_ID,finished:d});else if(_(this._config.chunk)&&!c){if(this._config.chunk(p,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=p=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(p.data),this._completeResults.errors=this._completeResults.errors.concat(p.errors),this._completeResults.meta=p.meta),this._completed||!d||!_(this._config.complete)||p&&p.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||p&&p.meta.paused||this._nextChunk(),p}this._halted=!0},this._sendError=function(n){_(this._config.error)?this._config.error(n):a&&this._config.error&&s.postMessage({workerId:u.WORKER_ID,error:n,finished:!1})}}function k(e){var n;(e=e||{}).chunkSize||(e.chunkSize=u.RemoteChunkSize),w.call(this,e),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),l||(n.onload=W(this._chunkLoaded,this),n.onerror=W(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var c,d=this._config.downloadRequestHeaders;for(c in d)n.setRequestHeader(c,d[c])}var p;this._config.chunkSize&&(p=this._start+this._config.chunkSize-1,n.setRequestHeader("Range","bytes="+this._start+"-"+p));try{n.send(this._config.downloadRequestBody)}catch(I){this._chunkError(I.message)}l&&n.status===0&&this._chunkError()}},this._chunkLoaded=function(){n.readyState===4&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize||n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(c=>(c=c.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1)(n),this.parseChunk(n.responseText)))},this._chunkError=function(c){c=n.statusText||c,this._sendError(new Error(c))}}function v(e){(e=e||{}).chunkSize||(e.chunkSize=u.LocalChunkSize),w.call(this,e);var n,c,d=typeof FileReader<"u";this.stream=function(p){this._input=p,c=p.slice||p.webkitSlice||p.mozSlice,d?((n=new FileReader).onload=W(this._chunkLoaded,this),n.onerror=W(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var p=this._input,I=(this._config.chunkSize&&(I=Math.min(this._start+this._config.chunkSize,this._input.size),p=c.call(p,this._start,I)),n.readAsText(p,this._config.encoding));d||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(p){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(p.target.result)},this._chunkError=function(){this._sendError(n.error)}}function g(e){var n;w.call(this,e=e||{}),this.stream=function(c){return n=c,this._nextChunk()},this._nextChunk=function(){var c,d;if(!this._finished)return c=this._config.chunkSize,n=c?(d=n.substring(0,c),n.substring(c)):(d=n,""),this._finished=!n,this.parseChunk(d)}}function m(e){w.call(this,e=e||{});var n=[],c=!0,d=!1;this.pause=function(){w.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){w.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(p){this._input=p,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&n.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):c=!0},this._streamData=W(function(p){try{n.push(typeof p=="string"?p:p.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(I){this._streamError(I)}},this),this._streamError=W(function(p){this._streamCleanUp(),this._sendError(p)},this),this._streamEnd=W(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function C(e){var n,c,d,p,I=Math.pow(2,53),J=-I,ae=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,V=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,j=this,E=0,oe=0,R=!1,b=!1,O=[],S={data:[],errors:[],meta:{}};function re(T){return e.skipEmptyLines==="greedy"?T.join("").trim()==="":T.length===1&&T[0].length===0}function $(){if(S&&d&&(de("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),d=!1),e.skipEmptyLines&&(S.data=S.data.filter(function(P){return!re(P)})),le()){let P=function(Q,ee){_(e.transformHeader)&&(Q=e.transformHeader(Q,ee)),O.push(Q)};if(S)if(Array.isArray(S.data[0])){for(var T=0;le()&&T<S.data.length;T++)S.data[T].forEach(P);S.data.splice(0,1)}else S.data.forEach(P)}function Z(P,Q){for(var ee=e.header?{}:[],z=0;z<P.length;z++){var N=z,G=P[z],G=((H,X)=>(te=>(e.dynamicTypingFunction&&e.dynamicTyping[te]===void 0&&(e.dynamicTyping[te]=e.dynamicTypingFunction(te)),(e.dynamicTyping[te]||e.dynamicTyping)===!0))(H)?X==="true"||X==="TRUE"||X!=="false"&&X!=="FALSE"&&((te=>{if(ae.test(te)&&(te=parseFloat(te),J<te&&te<I))return 1})(X)?parseFloat(X):V.test(X)?new Date(X):X===""?null:X):X)(N=e.header?z>=O.length?"__parsed_extra":O[z]:N,G=e.transform?e.transform(G,N):G);N==="__parsed_extra"?(ee[N]=ee[N]||[],ee[N].push(G)):ee[N]=G}return e.header&&(z>O.length?de("FieldMismatch","TooManyFields","Too many fields: expected "+O.length+" fields but parsed "+z,oe+Q):z<O.length&&de("FieldMismatch","TooFewFields","Too few fields: expected "+O.length+" fields but parsed "+z,oe+Q)),ee}var F;S&&(e.header||e.dynamicTyping||e.transform)&&(F=1,!S.data.length||Array.isArray(S.data[0])?(S.data=S.data.map(Z),F=S.data.length):S.data=Z(S.data,0),e.header&&S.meta&&(S.meta.fields=O),oe+=F)}function le(){return e.header&&O.length===0}function de(T,Z,F,P){T={type:T,code:Z,message:F},P!==void 0&&(T.row=P),S.errors.push(T)}_(e.step)&&(p=e.step,e.step=function(T){S=T,le()?$():($(),S.data.length!==0&&(E+=T.data.length,e.preview&&E>e.preview?c.abort():(S.data=S.data[0],p(S,j))))}),this.parse=function(T,Z,F){var P=e.quoteChar||'"',P=(e.newline||(e.newline=this.guessLineEndings(T,P)),d=!1,e.delimiter?_(e.delimiter)&&(e.delimiter=e.delimiter(T),S.meta.delimiter=e.delimiter):((P=((Q,ee,z,N,G)=>{var H,X,te,Re;G=G||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Se=0;Se<G.length;Se++){for(var ve,ce=G[Se],we=0,ne=0,ge=0,me=(te=void 0,new D({comments:N,delimiter:ce,newline:ee,preview:10}).parse(Q)),ye=0;ye<me.data.length;ye++)z&&re(me.data[ye])?ge++:(ve=me.data[ye].length,ne+=ve,te===void 0?te=ve:0<ve&&(we+=Math.abs(ve-te),te=ve));0<me.data.length&&(ne/=me.data.length-ge),(X===void 0||we<=X)&&(Re===void 0||Re<ne)&&1.99<ne&&(X=we,H=ce,Re=ne)}return{successful:!!(e.delimiter=H),bestDelimiter:H}})(T,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=P.bestDelimiter:(d=!0,e.delimiter=u.DefaultDelimiter),S.meta.delimiter=e.delimiter),K(e));return e.preview&&e.header&&P.preview++,n=T,c=new D(P),S=c.parse(n,Z,F),$(),R?{meta:{paused:!0}}:S||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,c.abort(),n=_(e.chunk)?"":n.substring(c.getCharIndex())},this.resume=function(){j.streamer._halted?(R=!1,j.streamer.parseChunk(n,!0)):setTimeout(j.resume,3)},this.aborted=function(){return b},this.abort=function(){b=!0,c.abort(),S.meta.aborted=!0,_(e.complete)&&e.complete(S),n=""},this.guessLineEndings=function(Q,P){Q=Q.substring(0,1048576);var P=new RegExp(L(P)+"([^]*?)"+L(P),"gm"),F=(Q=Q.replace(P,"")).split("\r"),P=Q.split(`
`),Q=1<P.length&&P[0].length<F[0].length;if(F.length===1||Q)return`
`;for(var ee=0,z=0;z<F.length;z++)F[z][0]===`
`&&ee++;return ee>=F.length/2?`\r
`:"\r"}}function L(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(e){var n=(e=e||{}).delimiter,c=e.newline,d=e.comments,p=e.step,I=e.preview,J=e.fastMode,ae=null,V=e.quoteChar==null?'"':e.quoteChar,j=V;if(e.escapeChar!==void 0&&(j=e.escapeChar),(typeof n!="string"||-1<u.BAD_DELIMITERS.indexOf(n))&&(n=","),d===n)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<u.BAD_DELIMITERS.indexOf(d))&&(d=!1),c!==`
`&&c!=="\r"&&c!==`\r
`&&(c=`
`);var E=0,oe=!1;this.parse=function(R,b,O){if(typeof R!="string")throw new Error("Input must be a string");var S=R.length,re=n.length,$=c.length,le=d.length,de=_(p),T=[],Z=[],F=[],P=E=0;if(!R)return ce();if(J||J!==!1&&R.indexOf(V)===-1){for(var Q=R.split(c),ee=0;ee<Q.length;ee++){if(F=Q[ee],E+=F.length,ee!==Q.length-1)E+=c.length;else if(O)return ce();if(!d||F.substring(0,le)!==d){if(de){if(T=[],te(F.split(n)),we(),oe)return ce()}else te(F.split(n));if(I&&I<=ee)return T=T.slice(0,I),ce(!0)}}return ce()}for(var z=R.indexOf(n,E),N=R.indexOf(c,E),G=new RegExp(L(j)+L(V),"g"),H=R.indexOf(V,E);;)if(R[E]===V)for(H=E,E++;;){if((H=R.indexOf(V,H+1))===-1)return O||Z.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:E}),Se();if(H===S-1)return Se(R.substring(E,H).replace(G,V));if(V===j&&R[H+1]===j)H++;else if(V===j||H===0||R[H-1]!==j){z!==-1&&z<H+1&&(z=R.indexOf(n,H+1));var X=Re((N=N!==-1&&N<H+1?R.indexOf(c,H+1):N)===-1?z:Math.min(z,N));if(R.substr(H+1+X,re)===n){F.push(R.substring(E,H).replace(G,V)),R[E=H+1+X+re]!==V&&(H=R.indexOf(V,E)),z=R.indexOf(n,E),N=R.indexOf(c,E);break}if(X=Re(N),R.substring(H+1+X,H+1+X+$)===c){if(F.push(R.substring(E,H).replace(G,V)),ve(H+1+X+$),z=R.indexOf(n,E),H=R.indexOf(V,E),de&&(we(),oe))return ce();if(I&&T.length>=I)return ce(!0);break}Z.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:E}),H++}}else if(d&&F.length===0&&R.substring(E,E+le)===d){if(N===-1)return ce();E=N+$,N=R.indexOf(c,E),z=R.indexOf(n,E)}else if(z!==-1&&(z<N||N===-1))F.push(R.substring(E,z)),E=z+re,z=R.indexOf(n,E);else{if(N===-1)break;if(F.push(R.substring(E,N)),ve(N+$),de&&(we(),oe))return ce();if(I&&T.length>=I)return ce(!0)}return Se();function te(ne){T.push(ne),P=E}function Re(ne){var ge=0;return ge=ne!==-1&&(ne=R.substring(H+1,ne))&&ne.trim()===""?ne.length:ge}function Se(ne){return O||(ne===void 0&&(ne=R.substring(E)),F.push(ne),E=S,te(F),de&&we()),ce()}function ve(ne){E=ne,te(F),F=[],N=R.indexOf(c,E)}function ce(ne){if(e.header&&!b&&T.length){var ge=T[0],me={},ye=new Set(ge);let Xe=!1;for(let Le=0;Le<ge.length;Le++){let _e=ge[Le];if(me[_e=_(e.transformHeader)?e.transformHeader(_e,Le):_e]){let Ie,Ye=me[_e];for(;Ie=_e+"_"+Ye,Ye++,ye.has(Ie););ye.add(Ie),ge[Le]=Ie,me[_e]++,Xe=!0,(ae=ae===null?{}:ae)[Ie]=_e}else me[_e]=1,ge[Le]=_e;ye.add(_e)}Xe&&console.warn("Duplicate headers found and renamed.")}return{data:T,errors:Z,meta:{delimiter:n,linebreak:c,aborted:oe,truncated:!!ne,cursor:P+(b||0),renamedHeaders:ae}}}function we(){p(ce()),T=[],Z=[]}},this.abort=function(){oe=!0},this.getCharIndex=function(){return E}}function x(e){var n=e.data,c=f[n.workerId],d=!1;if(n.error)c.userError(n.error,n.file);else if(n.results&&n.results.data){var p={abort:function(){d=!0,y(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:M,resume:M};if(_(c.userStep)){for(var I=0;I<n.results.data.length&&(c.userStep({data:n.results.data[I],errors:n.results.errors,meta:n.results.meta},p),!d);I++);delete n.results}else _(c.userChunk)&&(c.userChunk(n.results,p,n.file),delete n.results)}n.finished&&!d&&y(n.workerId,n.results)}function y(e,n){var c=f[e];_(c.userComplete)&&c.userComplete(n),c.terminate(),delete f[e]}function M(){throw new Error("Not implemented.")}function K(e){if(typeof e!="object"||e===null)return e;var n,c=Array.isArray(e)?[]:{};for(n in e)c[n]=K(e[n]);return c}function W(e,n){return function(){e.apply(n,arguments)}}function _(e){return typeof e=="function"}return u.parse=function(e,n){var c=(n=n||{}).dynamicTyping||!1;if(_(c)&&(n.dynamicTypingFunction=c,c={}),n.dynamicTyping=c,n.transform=!!_(n.transform)&&n.transform,!n.worker||!u.WORKERS_SUPPORTED)return c=null,u.NODE_STREAM_INPUT,typeof e=="string"?(e=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(e),c=new(n.download?k:g)(n)):e.readable===!0&&_(e.read)&&_(e.on)?c=new m(n):(s.File&&e instanceof File||e instanceof Object)&&(c=new v(n)),c.stream(e);(c=(()=>{var d;return!!u.WORKERS_SUPPORTED&&(d=(()=>{var p=s.URL||s.webkitURL||null,I=r.toString();return u.BLOB_URL||(u.BLOB_URL=p.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",I,")();"],{type:"text/javascript"})))})(),(d=new s.Worker(d)).onmessage=x,d.id=h++,f[d.id]=d)})()).userStep=n.step,c.userChunk=n.chunk,c.userComplete=n.complete,c.userError=n.error,n.step=_(n.step),n.chunk=_(n.chunk),n.complete=_(n.complete),n.error=_(n.error),delete n.worker,c.postMessage({input:e,config:n,workerId:c.id})},u.unparse=function(e,n){var c=!1,d=!0,p=",",I=`\r
`,J='"',ae=J+J,V=!1,j=null,E=!1,oe=((()=>{if(typeof n=="object"){if(typeof n.delimiter!="string"||u.BAD_DELIMITERS.filter(function(O){return n.delimiter.indexOf(O)!==-1}).length||(p=n.delimiter),typeof n.quotes!="boolean"&&typeof n.quotes!="function"&&!Array.isArray(n.quotes)||(c=n.quotes),typeof n.skipEmptyLines!="boolean"&&typeof n.skipEmptyLines!="string"||(V=n.skipEmptyLines),typeof n.newline=="string"&&(I=n.newline),typeof n.quoteChar=="string"&&(J=n.quoteChar),typeof n.header=="boolean"&&(d=n.header),Array.isArray(n.columns)){if(n.columns.length===0)throw new Error("Option columns is empty");j=n.columns}n.escapeChar!==void 0&&(ae=n.escapeChar+J),n.escapeFormulae instanceof RegExp?E=n.escapeFormulae:typeof n.escapeFormulae=="boolean"&&n.escapeFormulae&&(E=/^[=+\-@\t\r].*$/)}})(),new RegExp(L(J),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return R(null,e,V);if(typeof e[0]=="object")return R(j||Object.keys(e[0]),e,V)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||j),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),R(e.fields||[],e.data||[],V);throw new Error("Unable to serialize unrecognized input");function R(O,S,re){var $="",le=(typeof O=="string"&&(O=JSON.parse(O)),typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(O)&&0<O.length),de=!Array.isArray(S[0]);if(le&&d){for(var T=0;T<O.length;T++)0<T&&($+=p),$+=b(O[T],T);0<S.length&&($+=I)}for(var Z=0;Z<S.length;Z++){var F=(le?O:S[Z]).length,P=!1,Q=le?Object.keys(S[Z]).length===0:S[Z].length===0;if(re&&!le&&(P=re==="greedy"?S[Z].join("").trim()==="":S[Z].length===1&&S[Z][0].length===0),re==="greedy"&&le){for(var ee=[],z=0;z<F;z++){var N=de?O[z]:z;ee.push(S[Z][N])}P=ee.join("").trim()===""}if(!P){for(var G=0;G<F;G++){0<G&&!Q&&($+=p);var H=le&&de?O[G]:G;$+=b(S[Z][H],G)}Z<S.length-1&&(!re||0<F&&!Q)&&($+=I)}}return $}function b(O,S){var re,$;return O==null?"":O.constructor===Date?JSON.stringify(O).slice(1,25):($=!1,E&&typeof O=="string"&&E.test(O)&&(O="'"+O,$=!0),re=O.toString().replace(oe,ae),($=$||c===!0||typeof c=="function"&&c(O,S)||Array.isArray(c)&&c[S]||((le,de)=>{for(var T=0;T<de.length;T++)if(-1<le.indexOf(de[T]))return!0;return!1})(re,u.BAD_DELIMITERS)||-1<re.indexOf(p)||re.charAt(0)===" "||re.charAt(re.length-1)===" ")?J+re+J:re)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!l&&!!s.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=D,u.ParserHandle=C,u.NetworkStreamer=k,u.FileStreamer=v,u.StringStreamer=g,u.ReadableStreamStreamer=m,s.jQuery&&((o=s.jQuery).fn.parse=function(e){var n=e.config||{},c=[];return this.each(function(I){if(!(o(this).prop("tagName").toUpperCase()==="INPUT"&&o(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var J=0;J<this.files.length;J++)c.push({file:this.files[J],inputElem:this,instanceConfig:o.extend({},n)})}),d(),this;function d(){if(c.length===0)_(e.complete)&&e.complete();else{var I,J,ae,V,j=c[0];if(_(e.before)){var E=e.before(j.file,j.inputElem);if(typeof E=="object"){if(E.action==="abort")return I="AbortError",J=j.file,ae=j.inputElem,V=E.reason,void(_(e.error)&&e.error({name:I},J,ae,V));if(E.action==="skip")return void p();typeof E.config=="object"&&(j.instanceConfig=o.extend(j.instanceConfig,E.config))}else if(E==="skip")return void p()}var oe=j.instanceConfig.complete;j.instanceConfig.complete=function(R){_(oe)&&oe(R,j.file,j.inputElem),p()},u.parse(j.file,j.instanceConfig)}}function p(){c.splice(0,1),d()}}),a&&(s.onmessage=function(e){e=e.data,u.WORKER_ID===void 0&&e&&(u.WORKER_ID=e.workerId),typeof e.input=="string"?s.postMessage({workerId:u.WORKER_ID,results:u.parse(e.input,e.config),finished:!0}):(s.File&&e.input instanceof File||e.input instanceof Object)&&(e=u.parse(e.input,e.config))&&s.postMessage({workerId:u.WORKER_ID,results:e,finished:!0})}),(k.prototype=Object.create(w.prototype)).constructor=k,(v.prototype=Object.create(w.prototype)).constructor=v,(g.prototype=Object.create(g.prototype)).constructor=g,(m.prototype=Object.create(w.prototype)).constructor=m,u})})(bt);var Vt=bt.exports;const Wt=Nt(Vt);var wt={exports:{}};/*! streamsaver. MIT License. Jimmy WÃ¤rting <https://jimmy.warting.se/opensource> */(function(i){((t,r)=>{i.exports=r()})("streamSaver",()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let r=null,s=!1;const o=m=>{try{m()}catch{}},l=t.WebStreamsPolyfill||{},a=t.isSecureContext;let f=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const h=a||"MozAppearance"in document.documentElement.style?"iframe":"navigate",u={createWriteStream:g,WritableStream:t.WritableStream||l.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function w(m){if(!m)throw new Error("meh");const C=document.createElement("iframe");return C.hidden=!0,C.src=m,C.loaded=!1,C.name="iframe",C.isIframe=!0,C.postMessage=(...L)=>C.contentWindow.postMessage(...L),C.addEventListener("load",()=>{C.loaded=!0},{once:!0}),document.body.appendChild(C),C}function k(m){const C="width=200,height=100",L=document.createDocumentFragment(),D={frame:t.open(m,"popup",C),loaded:!1,isIframe:!1,isPopup:!0,remove(){D.frame.close()},addEventListener(...y){L.addEventListener(...y)},dispatchEvent(...y){L.dispatchEvent(...y)},removeEventListener(...y){L.removeEventListener(...y)},postMessage(...y){D.frame.postMessage(...y)}},x=y=>{y.source===D.frame&&(D.loaded=!0,t.removeEventListener("message",x),D.dispatchEvent(new Event("load")))};return t.addEventListener("message",x),D}try{new Response(new ReadableStream),a&&!("serviceWorker"in navigator)&&(f=!0)}catch{f=!0}o(()=>{const{readable:m}=new TransformStream,C=new MessageChannel;C.port1.postMessage(m,[m]),C.port1.close(),C.port2.close(),s=!0,Object.defineProperty(u,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function v(){r||(r=a?w(u.mitm):k(u.mitm))}function g(m,C,L){let D={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},x=0,y=null,M=null,K=null;if(Number.isFinite(C)?([L,C]=[C,L],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),D.size=L,D.writableStrategy=C):C&&C.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),D.size=L,D.writableStrategy=C):D=C||{},!f){v(),M=new MessageChannel,m=encodeURIComponent(m.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const _={transferringReadable:s,pathname:D.pathname||Math.random().toString().slice(-6)+"/"+m,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+m}};D.size&&(_.headers["Content-Length"]=D.size);const e=[_,"*",[M.port2]];if(s){const n=h==="iframe"?void 0:{transform(d,p){if(!(d instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");x+=d.length,p.enqueue(d),y&&(location.href=y,y=null)},flush(){y&&(location.href=y)}};K=new u.TransformStream(n,D.writableStrategy,D.readableStrategy);const c=K.readable;M.port1.postMessage({readableStream:c},[c])}M.port1.onmessage=n=>{n.data.download?h==="navigate"?(r.remove(),r=null,x?location.href=n.data.download:y=n.data.download):(r.isPopup&&(r.remove(),r=null,h==="iframe"&&w(u.mitm)),w(n.data.download)):n.data.abort&&(W=[],M.port1.postMessage("abort"),M.port1.onmessage=null,M.port1.close(),M.port2.close(),M=null)},r.loaded?r.postMessage(...e):r.addEventListener("load",()=>{r.postMessage(...e)},{once:!0})}let W=[];return!f&&K&&K.writable||new u.WritableStream({write(_){if(!(_ instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(f){W.push(_);return}M.port1.postMessage(_),x+=_.length,y&&(location.href=y,y=null)},close(){if(f){const _=new Blob(W,{type:"application/octet-stream; charset=utf-8"}),e=document.createElement("a");e.href=URL.createObjectURL(_),e.download=m,e.click()}else M.port1.postMessage("end")},abort(){W=[],M.port1.postMessage("abort"),M.port1.onmessage=null,M.port1.close(),M.port2.close(),M=null}},D.writableStrategy)}return u})})(wt);var Bt=wt.exports;function ft(i,t,r){const s=i.slice();return s[9]=t[r],s}function dt(i){let t,r=i[9]+"",s;return{c(){t=B("span"),s=Ue(r),this.h()},l(o){t=q(o,"SPAN",{class:!0});var l=se(t);s=Ne(l,r),l.forEach(A),this.h()},h(){U(t,"class","chip variant-filled hover:variant-soft-surface mr-1 mb-1")},m(o,l){ie(o,t,l),Y(t,s)},p(o,l){l&2&&r!==(r=o[9]+"")&&mt(s,r)},d(o){o&&A(t)}}}function qt(i){let t,r,s,o="With",l,a,f,h,u=je(i[1]),w=[];for(let k=0;k<u.length;k+=1)w[k]=dt(ft(i,u,k));return{c(){t=B("div"),r=B("div"),s=B("span"),s.textContent=o,l=ke(),a=B("div"),f=ke(),h=B("div");for(let k=0;k<w.length;k+=1)w[k].c();this.h()},l(k){t=q(k,"DIV",{class:!0});var v=se(t);r=q(v,"DIV",{class:!0});var g=se(r);s=q(g,"SPAN",{"data-svelte-h":!0}),Ce(s)!=="svelte-g4ew0a"&&(s.textContent=o),l=Ee(g),a=q(g,"DIV",{class:!0,contenteditable:!0}),se(a).forEach(A),g.forEach(A),f=Ee(v),h=q(v,"DIV",{class:!0});var m=se(h);for(let C=0;C<w.length;C+=1)w[C].l(m);m.forEach(A),v.forEach(A),this.h()},h(){U(a,"class","w-full border-b-2 border-gray-300 p-2 min-h-10 bg-surface-700"),U(a,"contenteditable","true"),U(r,"class","label"),U(h,"class","flex flex-wrap"),U(t,"class","flex flex-col space-y-2 w-full min-w-64")},m(k,v){ie(k,t,v),Y(t,r),Y(r,s),Y(r,l),Y(r,a),i[2](a),Y(t,f),Y(t,h);for(let g=0;g<w.length;g+=1)w[g]&&w[g].m(h,null)},p(k,[v]){if(v&2){u=je(k[1]);let g;for(g=0;g<u.length;g+=1){const m=ft(k,u,g);w[g]?w[g].p(m,v):(w[g]=dt(m),w[g].c(),w[g].m(h,null))}for(;g<w.length;g+=1)w[g].d(1);w.length=u.length}},i:be,o:be,d(k){k&&A(t),i[2](null),gt(w,k)}}}function Kt(i,t,r){let{columns:s=[]}=t,{contenteditableDiv:o=null}=t,l=null;function a(){const v=window.getSelection();if(!v||v.rangeCount===0)return;const g=v.getRangeAt(0);if(o&&o.contains(g.commonAncestorContainer)){let m=g.commonAncestorContainer;m.nodeType===Node.TEXT_NODE&&(m=m.parentElement),m&&m.classList.contains("chip")?l=null:l=g}}function f(){const v=window.getSelection();v&&l&&(v.removeAllRanges(),v.addRange(l))}function h(v){if(o){if(l){const g=document.createElement("div");g.innerHTML=v;const m=document.createDocumentFragment();for(;g.firstChild;)m.appendChild(g.firstChild);l.deleteContents(),l.insertNode(m),l.collapse(!1),f()}else{const g=document.createElement("div");for(g.innerHTML=v;g.firstChild;)o.appendChild(g.firstChild)}o.focus()}}function u(v){if(!o)return;const g=window.getSelection();if(!g||!g.anchorNode)return;const m=g.anchorNode.parentElement;m&&m.classList.contains("chip")&&(v.key==="Backspace"||v.key==="Delete")&&(v.preventDefault(),m.remove())}function w(){document.querySelectorAll(".chip").forEach(g=>{g.addEventListener("click",()=>{const m=`<span class="chip variant-filled py-1" contenteditable="false">${g.textContent}</span>`;h(m)})})}St(()=>{w(),o&&(o.addEventListener("keydown",u),o.addEventListener("mouseup",a),o.addEventListener("keyup",a),o.addEventListener("click",a))});function k(v){Te[v?"unshift":"push"](()=>{o=v,r(0,o)})}return i.$$set=v=>{"columns"in v&&r(1,s=v.columns),"contenteditableDiv"in v&&r(0,o=v.contenteditableDiv)},[o,s,k]}class Zt extends Pe{constructor(t){super(),He(this,t,Kt,qt,Fe,{columns:1,contenteditableDiv:0})}}function ht(i,t,r){const s=i.slice();return s[3]=t[r],s}function pt(i){let t,r=i[3]+"",s,o;return{c(){t=B("option"),s=Ue(r),this.h()},l(l){t=q(l,"OPTION",{});var a=se(t);s=Ne(a,r),a.forEach(A),this.h()},h(){t.__value=o=i[3],st(t,t.__value)},m(l,a){ie(l,t,a),Y(t,s)},p(l,a){a&2&&r!==(r=l[3]+"")&&mt(s,r),a&2&&o!==(o=l[3])&&(t.__value=o,st(t,t.__value))},d(l){l&&A(t)}}}function Qt(i){let t,r,s,o=je(i[1]),l=[];for(let a=0;a<o.length;a+=1)l[a]=pt(ht(i,o,a));return{c(){t=B("select");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){t=q(a,"SELECT",{class:!0});var f=se(t);for(let h=0;h<l.length;h+=1)l[h].l(f);f.forEach(A),this.h()},h(){U(t,"class","select"),i[0]===void 0&&Ct(()=>i[2].call(t))},m(a,f){ie(a,t,f);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(t,null);rt(t,i[0],!0),r||(s=ue(t,"change",i[2]),r=!0)},p(a,[f]){if(f&2){o=je(a[1]);let h;for(h=0;h<o.length;h+=1){const u=ht(a,o,h);l[h]?l[h].p(u,f):(l[h]=pt(u),l[h].c(),l[h].m(t,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=o.length}f&3&&rt(t,a[0])},i:be,o:be,d(a){a&&A(t),gt(l,a),r=!1,s()}}}function Jt(i,t,r){let{columns:s=[]}=t,{value:o=s[0]}=t;function l(){o=Rt(this),r(0,o),r(1,s)}return i.$$set=a=>{"columns"in a&&r(1,s=a.columns),"value"in a&&r(0,o=a.value)},[o,s,l]}class Gt extends Pe{constructor(t){super(),He(this,t,Jt,Qt,Fe,{columns:1,value:0})}}function Xt(i){let t,r,s,o='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>',l,a,f,h,u,w,k,v,g,m,C,L,D;function x(e){i[9](e)}let y={name:"files",$$slots:{message:[en],lead:[$t]},$$scope:{ctx:i}};i[1]!==void 0&&(y.files=i[1]),a=new vt({props:y}),Te.push(()=>Me(a,"files",x)),a.$on("change",i[6]);function M(e){i[10](e)}let K={columns:i[4]};i[2]!==void 0&&(K.value=i[2]),u=new Gt({props:K}),Te.push(()=>Me(u,"value",M));function W(e){i[11](e)}let _={columns:i[4]};return i[3]!==void 0&&(_.contenteditableDiv=i[3]),g=new Zt({props:_}),Te.push(()=>Me(g,"contenteditableDiv",W)),{c(){t=B("div"),r=B("div"),s=B("button"),s.innerHTML=o,l=ke(),Oe(a.$$.fragment),h=ke(),Oe(u.$$.fragment),k=ke(),v=B("div"),Oe(g.$$.fragment),this.h()},l(e){t=q(e,"DIV",{class:!0});var n=se(t);r=q(n,"DIV",{class:!0});var c=se(r);s=q(c,"BUTTON",{class:!0,"data-svelte-h":!0}),Ce(s)!=="svelte-1unjdoz"&&(s.innerHTML=o),c.forEach(A),l=Ee(n),Ae(a.$$.fragment,n),h=Ee(n),Ae(u.$$.fragment,n),k=Ee(n),v=q(n,"DIV",{class:!0});var d=se(v);Ae(g.$$.fragment,d),d.forEach(A),n.forEach(A),this.h()},h(){U(s,"class","text-gray-500 hover:text-primary-500"),U(r,"class","flex justify-end items-end"),U(v,"class","flex space-x-5"),U(t,"class","space-y-5")},m(e,n){ie(e,t,n),Y(t,r),Y(r,s),Y(t,l),ze(a,t,null),Y(t,h),ze(u,t,null),Y(t,k),Y(t,v),ze(g,v,null),C=!0,L||(D=ue(s,"click",i[8]),L=!0)},p(e,n){const c={};n&8192&&(c.$$scope={dirty:n,ctx:e}),!f&&n&2&&(f=!0,c.files=e[1],De(()=>f=!1)),a.$set(c);const d={};n&16&&(d.columns=e[4]),!w&&n&4&&(w=!0,d.value=e[2],De(()=>w=!1)),u.$set(d);const p={};n&16&&(p.columns=e[4]),!m&&n&8&&(m=!0,p.contenteditableDiv=e[3],De(()=>m=!1)),g.$set(p)},i(e){C||(fe(a.$$.fragment,e),fe(u.$$.fragment,e),fe(g.$$.fragment,e),C=!0)},o(e){he(a.$$.fragment,e),he(u.$$.fragment,e),he(g.$$.fragment,e),C=!1},d(e){e&&A(t),xe(a),xe(u),xe(g),L=!1,D()}}}function Yt(i){let t,r,s,o;function l(f){i[7](f)}let a={name:"files",accept:".tsv,.csv",$$slots:{meta:[rn],message:[nn],lead:[tn]},$$scope:{ctx:i}};return i[0]!==void 0&&(a.files=i[0]),r=new vt({props:a}),Te.push(()=>Me(r,"files",l)),r.$on("change",i[5]),{c(){t=B("div"),Oe(r.$$.fragment),this.h()},l(f){t=q(f,"DIV",{class:!0});var h=se(t);Ae(r.$$.fragment,h),h.forEach(A),this.h()},h(){U(t,"class","flex items-center w-full ")},m(f,h){ie(f,t,h),ze(r,t,null),o=!0},p(f,h){const u={};h&8192&&(u.$$scope={dirty:h,ctx:f}),!s&&h&1&&(s=!0,u.files=f[0],De(()=>s=!1)),r.$set(u)},i(f){o||(fe(r.$$.fragment,f),o=!0)},o(f){he(r.$$.fragment,f),o=!1},d(f){f&&A(t),xe(r)}}}function $t(i){let t,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-16"><path fill-rule="evenodd" d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z" clip-rule="evenodd"></path><path d="M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"></path></svg>';return{c(){t=B("div"),t.innerHTML=r,this.h()},l(s){t=q(s,"DIV",{class:!0,"data-svelte-h":!0}),Ce(t)!=="svelte-1j7iz53"&&(t.innerHTML=r),this.h()},h(){U(t,"class","flex justify-center")},m(s,o){ie(s,t,o)},p:be,d(s){s&&A(t)}}}function en(i){let t,r='<span class="font-semibold">Add files</span> to replace';return{c(){t=B("p"),t.innerHTML=r,this.h()},l(s){t=q(s,"P",{class:!0,"data-svelte-h":!0}),Ce(t)!=="svelte-wv6rcn"&&(t.innerHTML=r),this.h()},h(){U(t,"class","text-lg")},m(s,o){ie(s,t,o)},p:be,d(s){s&&A(t)}}}function tn(i){let t,r='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-16"><path fill-rule="evenodd" d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z" clip-rule="evenodd"></path><path d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"></path></svg>';return{c(){t=B("div"),t.innerHTML=r,this.h()},l(s){t=q(s,"DIV",{class:!0,"data-svelte-h":!0}),Ce(t)!=="svelte-1w766if"&&(t.innerHTML=r),this.h()},h(){U(t,"class","flex justify-center")},m(s,o){ie(s,t,o)},p:be,d(s){s&&A(t)}}}function nn(i){let t,r='<span class="font-semibold">Load a file</span> or drag and drop';return{c(){t=B("p"),t.innerHTML=r,this.h()},l(s){t=q(s,"P",{class:!0,"data-svelte-h":!0}),Ce(t)!=="svelte-13s4mf4"&&(t.innerHTML=r),this.h()},h(){U(t,"class","text-lg")},m(s,o){ie(s,t,o)},p:be,d(s){s&&A(t)}}}function rn(i){let t;return{c(){t=Ue("TSV & CSV allowed.")},l(r){t=Ne(r,"TSV & CSV allowed.")},m(r,s){ie(r,t,s)},d(r){r&&A(t)}}}function sn(i){let t,r,s,o,l;const a=[Yt,Xt],f=[];function h(u,w){return u[4]===void 0?0:1}return s=h(i),o=f[s]=a[s](i),{c(){t=B("div"),r=B("div"),o.c(),this.h()},l(u){t=q(u,"DIV",{class:!0});var w=se(t);r=q(w,"DIV",{class:!0});var k=se(r);o.l(k),k.forEach(A),w.forEach(A),this.h()},h(){U(r,"class","max-w-2xl w-full"),U(t,"class","h-full flex justify-center items-center mx-2")},m(u,w){ie(u,t,w),Y(t,r),f[s].m(r,null),l=!0},p(u,[w]){let k=s;s=h(u),s===k?f[s].p(u,w):(Be(),he(f[k],1,1,()=>{f[k]=null}),qe(),o=f[s],o?o.p(u,w):(o=f[s]=a[s](u),o.c()),fe(o,1),o.m(r,null))},i(u){l||(fe(o),l=!0)},o(u){he(o),l=!1},d(u){u&&A(t),f[s].d()}}}function an(i,t){let r="";for(let s=0;s<i.length;s++){const o=i[s];o instanceof HTMLElement?r+=t[o.innerHTML]:o instanceof Text&&o.textContent&&(r+=o.textContent)}return r}function on(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ln(i,t,r){let s,o,l,a=null,f,h=[];async function u(){const L=s==null?void 0:s[0];if(!L)return;const D=new FileReader;D.onload=x=>{var y;(y=x.target)!=null&&y.result&&Wt.parse(x.target.result,{header:!0,skipEmptyLines:!0,complete:M=>{console.log("Parsed data:",M.data),M.data.length>0&&r(4,f=Object.keys(M.data[0])),console.log("Columns:",f),h=M.data},error:M=>{console.error("Error parsing CSV:",M),r(4,f=[])}})},D.onerror=x=>{console.error("Error reading file:",x)},D.readAsText(L)}async function w(){if(console.log(o),!o||!a||a===null)return;const L=Object.fromEntries(h.map(x=>{if(!a)throw new Error("replaceDiv is not defined");const y=an(a.childNodes,x),M=x[l];if(!M)throw new Error("Index column not found");return[M,y]})),D=new RegExp(Object.keys(L).map(x=>on(x)).join("|"),"g");console.log(L),console.log(D);for(let x=0;x<o.length;x++){const y=o[x],K=Bt.createWriteStream(y.name,{size:y.size}).getWriter(),W=y.stream().getReader(),_=new TextDecoder,e=new TextEncoder;let n="";try{for(;;){const{value:c,done:d}=await W.read();if(d)break;const I=(n+_.decode(c,{stream:!0})).split(`
`);n=I.pop()||"";const ae=I.join(`
`).replace(D,j=>L[j]),V=e.encode(ae+`
`);await K.write(V)}if(n){const c=n.replace(D,p=>L[p]),d=e.encode(c);await K.write(d)}}finally{W.releaseLock(),K.close()}}}function k(L){s=L,r(0,s)}const v=()=>r(4,f=void 0);function g(L){o=L,r(1,o)}function m(L){l=L,r(2,l)}function C(L){a=L,r(3,a)}return[s,o,l,a,f,u,w,k,v,g,m,C]}class dn extends Pe{constructor(t){super(),He(this,t,ln,sn,Fe,{})}}export{dn as component};
