import{s as De,U as Ne,a1 as qe,e as A,a as ne,c as z,b as $,g as se,f as I,$ as Ye,p as D,a5 as Xe,i as G,h as O,S as fe,a2 as Ke,a3 as Ze,a4 as Qe,B as bt,a6 as $e,a7 as yt,V as et,X as _e,u as Le,t as Ue,a8 as ce,d as Ve,n as ve,a9 as ht,o as wt,j as pt,D as kt,aa as tt,a0 as nt,ab as Et,ac as Oe}from"../chunks/scheduler.Cj7RwWlE.js";import{S as Ie,i as Me,a as pe,g as Be,t as ge,c as We,k as Ae,b as ze,d as je,m as He,e as Fe}from"../chunks/index.DOu5qL2T.js";import{a as Ct,g as mt}from"../chunks/ProgressBar.svelte_svelte_type_style_lang.rdLYWvBr.js";function Pe(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}const St=i=>({}),st=i=>({}),xt=i=>({}),rt=i=>({}),Tt=i=>({}),it=i=>({});function at(i){let t,s,a;const l=i[18].lead,o=qe(l,i,i[17],it);return{c(){t=A("div"),o&&o.c(),this.h()},l(c){t=z(c,"DIV",{class:!0});var _=$(t);o&&o.l(_),_.forEach(I),this.h()},h(){D(t,"class",s="dropzone-lead "+i[5])},m(c,_){G(c,t,_),o&&o.m(t,null),a=!0},p(c,_){o&&o.p&&(!a||_[0]&131072)&&Ke(o,l,c,c[17],a?Qe(l,c[17],_,Tt):Ze(c[17]),it),(!a||_[0]&32&&s!==(s="dropzone-lead "+c[5]))&&D(t,"class",s)},i(c){a||(pe(o,c),a=!0)},o(c){ge(o,c),a=!1},d(c){c&&I(t),o&&o.d(c)}}}function Lt(i){let t,s="Upload a file",a;return{c(){t=A("strong"),t.textContent=s,a=Ue(" or drag and drop")},l(l){t=z(l,"STRONG",{"data-svelte-h":!0}),ce(t)!=="svelte-13uz6lq"&&(t.textContent=s),a=Ve(l," or drag and drop")},m(l,o){G(l,t,o),G(l,a,o)},p:ve,d(l){l&&(I(t),I(a))}}}function lt(i){let t,s,a;const l=i[18].meta,o=qe(l,i,i[17],st);return{c(){t=A("small"),o&&o.c(),this.h()},l(c){t=z(c,"SMALL",{class:!0});var _=$(t);o&&o.l(_),_.forEach(I),this.h()},h(){D(t,"class",s="dropzone-meta "+i[7])},m(c,_){G(c,t,_),o&&o.m(t,null),a=!0},p(c,_){o&&o.p&&(!a||_[0]&131072)&&Ke(o,l,c,c[17],a?Qe(l,c[17],_,St):Ze(c[17]),st),(!a||_[0]&128&&s!==(s="dropzone-meta "+c[7]))&&D(t,"class",s)},i(c){a||(pe(o,c),a=!0)},o(c){ge(o,c),a=!1},d(c){c&&I(t),o&&o.d(c)}}}function Rt(i){let t,s,a,l,o,c,_,w,u,h,y,f,p,g,k,N,H=[{type:"file"},{name:i[2]},{class:a="dropzone-input "+i[9]},i[11]()],W={};for(let e=0;e<H.length;e+=1)W=Ne(W,H[e]);let b=i[13].lead&&at(i);const x=i[18].message,T=qe(x,i,i[17],rt),U=T||Lt();let m=i[13].meta&&lt(i);return{c(){t=A("div"),s=A("input"),l=ne(),o=A("div"),c=A("div"),b&&b.c(),_=ne(),w=A("div"),U.c(),h=ne(),m&&m.c(),this.h()},l(e){t=z(e,"DIV",{class:!0,"data-testid":!0});var n=$(t);s=z(n,"INPUT",{type:!0,name:!0,class:!0}),l=se(n),o=z(n,"DIV",{class:!0});var r=$(o);c=z(r,"DIV",{class:!0});var d=$(c);b&&b.l(d),_=se(d),w=z(d,"DIV",{class:!0});var v=$(w);U.l(v),v.forEach(I),h=se(d),m&&m.l(d),d.forEach(I),r.forEach(I),n.forEach(I),this.h()},h(){Ye(s,W),D(w,"class",u="dropzone-message "+i[6]),D(c,"class",y="dropzone-interface-text "+i[4]),D(o,"class",f="dropzone-interface "+i[8]+" "+i[3]),D(t,"class",p="dropzone "+i[10]),D(t,"data-testid","file-dropzone"),Xe(t,"opacity-50",i[12].disabled)},m(e,n){G(e,t,n),O(t,s),s.autofocus&&s.focus(),i[32](s),O(t,l),O(t,o),O(o,c),b&&b.m(c,null),O(c,_),O(c,w),U.m(w,null),O(c,h),m&&m.m(c,null),g=!0,k||(N=[fe(s,"change",i[31]),fe(s,"change",i[19]),fe(s,"dragenter",i[20]),fe(s,"dragover",i[21]),fe(s,"dragleave",i[22]),fe(s,"drop",i[23]),fe(s,"click",i[24]),fe(s,"keydown",i[25]),fe(s,"keyup",i[26]),fe(s,"keypress",i[27]),fe(s,"focus",i[28]),fe(s,"focusin",i[29]),fe(s,"focusout",i[30])],k=!0)},p(e,n){Ye(s,W=Ct(H,[{type:"file"},(!g||n[0]&4)&&{name:e[2]},(!g||n[0]&512&&a!==(a="dropzone-input "+e[9]))&&{class:a},e[11]()])),e[13].lead?b?(b.p(e,n),n[0]&8192&&pe(b,1)):(b=at(e),b.c(),pe(b,1),b.m(c,_)):b&&(Be(),ge(b,1,1,()=>{b=null}),We()),T&&T.p&&(!g||n[0]&131072)&&Ke(T,x,e,e[17],g?Qe(x,e[17],n,xt):Ze(e[17]),rt),(!g||n[0]&64&&u!==(u="dropzone-message "+e[6]))&&D(w,"class",u),e[13].meta?m?(m.p(e,n),n[0]&8192&&pe(m,1)):(m=lt(e),m.c(),pe(m,1),m.m(c,null)):m&&(Be(),ge(m,1,1,()=>{m=null}),We()),(!g||n[0]&16&&y!==(y="dropzone-interface-text "+e[4]))&&D(c,"class",y),(!g||n[0]&264&&f!==(f="dropzone-interface "+e[8]+" "+e[3]))&&D(o,"class",f),(!g||n[0]&1024&&p!==(p="dropzone "+e[10]))&&D(t,"class",p),(!g||n[0]&5120)&&Xe(t,"opacity-50",e[12].disabled)},i(e){g||(pe(b),pe(U,e),pe(m),g=!0)},o(e){ge(b),ge(U,e),ge(m),g=!1},d(e){e&&I(t),i[32](null),b&&b.d(),U.d(e),m&&m.d(),k=!1,bt(N)}}}const Dt="textarea relative flex justify-center items-center",It="w-full absolute top-0 left-0 right-0 bottom-0 z-[1] opacity-0 disabled:!opacity-0 cursor-pointer",Mt="flex justify-center items-center text-center";function Ot(i,t,s){let a,l,o;const c=["files","fileInput","name","border","padding","rounded","regionInterface","regionInterfaceText","slotLead","slotMessage","slotMeta"];let _=$e(t,c),{$$slots:w={},$$scope:u}=t;const h=yt(w);let{files:y=void 0}=t,{fileInput:f=void 0}=t,{name:p}=t,{border:g="border-2 border-dashed"}=t,{padding:k="p-4 py-8"}=t,{rounded:N="rounded-container-token"}=t,{regionInterface:H=""}=t,{regionInterfaceText:W=""}=t,{slotLead:b="mb-4"}=t,{slotMessage:x=""}=t,{slotMeta:T="opacity-75"}=t;function U(){return delete _.class,_}function m(E){_e.call(this,i,E)}function e(E){_e.call(this,i,E)}function n(E){_e.call(this,i,E)}function r(E){_e.call(this,i,E)}function d(E){_e.call(this,i,E)}function v(E){_e.call(this,i,E)}function L(E){_e.call(this,i,E)}function V(E){_e.call(this,i,E)}function J(E){_e.call(this,i,E)}function M(E){_e.call(this,i,E)}function F(E){_e.call(this,i,E)}function C(E){_e.call(this,i,E)}function ue(){y=this.files,s(0,y)}function R(E){Le[E?"unshift":"push"](()=>{f=E,s(1,f)})}return i.$$set=E=>{s(33,t=Ne(Ne({},t),et(E))),s(12,_=$e(t,c)),"files"in E&&s(0,y=E.files),"fileInput"in E&&s(1,f=E.fileInput),"name"in E&&s(2,p=E.name),"border"in E&&s(14,g=E.border),"padding"in E&&s(15,k=E.padding),"rounded"in E&&s(16,N=E.rounded),"regionInterface"in E&&s(3,H=E.regionInterface),"regionInterfaceText"in E&&s(4,W=E.regionInterfaceText),"slotLead"in E&&s(5,b=E.slotLead),"slotMessage"in E&&s(6,x=E.slotMessage),"slotMeta"in E&&s(7,T=E.slotMeta),"$$scope"in E&&s(17,u=E.$$scope)},i.$$.update=()=>{s(10,a=`${Dt} ${g} ${k} ${N} ${t.class??""}`)},s(9,l=`${It}`),s(8,o=`${Mt}`),t=et(t),[y,f,p,H,W,b,x,T,o,l,a,U,_,h,g,k,N,u,w,m,e,n,r,d,v,L,V,J,M,F,C,ue,R]}class gt extends Ie{constructor(t){super(),Me(this,t,Ot,Rt,De,{files:0,fileInput:1,name:2,border:14,padding:15,rounded:16,regionInterface:3,regionInterfaceText:4,slotLead:5,slotMessage:6,slotMeta:7},null,[-1,-1])}}var At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var _t={exports:{}};/* @license
Papa Parse
v5.5.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(i,t){((s,a)=>{i.exports=a()})(At,function s(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},l,o=!a.document&&!!a.postMessage,c=a.IS_PAPA_WORKER||!1,_={},w=0,u={};function h(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var r=T(n);r.chunkSize=parseInt(r.chunkSize),n.step||n.chunk||(r.chunkSize=null),this._handle=new k(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(n,r){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let L=this._config.newline;L||(v=this._config.quoteChar||'"',L=this._handle.guessLineEndings(n,v)),n=[...n.split(L).slice(d)].join(L)}this.isFirstChunk&&m(this._config.beforeFirstChunk)&&(v=this._config.beforeFirstChunk(n))!==void 0&&(n=v),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+n,v=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=v.meta.cursor,d=(this._finished||(this._partialLine=d.substring(n-this._baseIndex),this._baseIndex=n),v&&v.data&&(this._rowCount+=v.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)a.postMessage({results:v,workerId:u.WORKER_ID,finished:d});else if(m(this._config.chunk)&&!r){if(this._config.chunk(v,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=v=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(v.data),this._completeResults.errors=this._completeResults.errors.concat(v.errors),this._completeResults.meta=v.meta),this._completed||!d||!m(this._config.complete)||v&&v.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||v&&v.meta.paused||this._nextChunk(),v}this._halted=!0},this._sendError=function(n){m(this._config.error)?this._config.error(n):c&&this._config.error&&a.postMessage({workerId:u.WORKER_ID,error:n,finished:!1})}}function y(e){var n;(e=e||{}).chunkSize||(e.chunkSize=u.RemoteChunkSize),h.call(this,e),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),o||(n.onload=U(this._chunkLoaded,this),n.onerror=U(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var r,d=this._config.downloadRequestHeaders;for(r in d)n.setRequestHeader(r,d[r])}var v;this._config.chunkSize&&(v=this._start+this._config.chunkSize-1,n.setRequestHeader("Range","bytes="+this._start+"-"+v));try{n.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}o&&n.status===0&&this._chunkError()}},this._chunkLoaded=function(){n.readyState===4&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize||n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(n),this.parseChunk(n.responseText)))},this._chunkError=function(r){r=n.statusText||r,this._sendError(new Error(r))}}function f(e){(e=e||{}).chunkSize||(e.chunkSize=u.LocalChunkSize),h.call(this,e);var n,r,d=typeof FileReader<"u";this.stream=function(v){this._input=v,r=v.slice||v.webkitSlice||v.mozSlice,d?((n=new FileReader).onload=U(this._chunkLoaded,this),n.onerror=U(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var v=this._input,L=(this._config.chunkSize&&(L=Math.min(this._start+this._config.chunkSize,this._input.size),v=r.call(v,this._start,L)),n.readAsText(v,this._config.encoding));d||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(v){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(v.target.result)},this._chunkError=function(){this._sendError(n.error)}}function p(e){var n;h.call(this,e=e||{}),this.stream=function(r){return n=r,this._nextChunk()},this._nextChunk=function(){var r,d;if(!this._finished)return r=this._config.chunkSize,n=r?(d=n.substring(0,r),n.substring(r)):(d=n,""),this._finished=!n,this.parseChunk(d)}}function g(e){h.call(this,e=e||{});var n=[],r=!0,d=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(v){this._input=v,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&n.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):r=!0},this._streamData=U(function(v){try{n.push(typeof v=="string"?v:v.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(L){this._streamError(L)}},this),this._streamError=U(function(v){this._streamCleanUp(),this._sendError(v)},this),this._streamEnd=U(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(e){var n,r,d,v,L=Math.pow(2,53),V=-L,J=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,C=0,ue=0,R=!1,E=!1,P=[],S={data:[],errors:[],meta:{}};function oe(j){return e.skipEmptyLines==="greedy"?j.join("").trim()==="":j.length===1&&j[0].length===0}function re(){if(S&&d&&(me("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+u.DefaultDelimiter+"'"),d=!1),e.skipEmptyLines&&(S.data=S.data.filter(function(K){return!oe(K)})),de()){let K=function(X,ie){m(e.transformHeader)&&(X=e.transformHeader(X,ie)),P.push(X)};if(S)if(Array.isArray(S.data[0])){for(var j=0;de()&&j<S.data.length;j++)S.data[j].forEach(K);S.data.splice(0,1)}else S.data.forEach(K)}function Y(K,X){for(var ie=e.header?{}:[],B=0;B<K.length;B++){var Q=B,ee=K[B],ee=((Z,te)=>(ae=>(e.dynamicTypingFunction&&e.dynamicTyping[ae]===void 0&&(e.dynamicTyping[ae]=e.dynamicTypingFunction(ae)),(e.dynamicTyping[ae]||e.dynamicTyping)===!0))(Z)?te==="true"||te==="TRUE"||te!=="false"&&te!=="FALSE"&&((ae=>{if(J.test(ae)&&(ae=parseFloat(ae),V<ae&&ae<L))return 1})(te)?parseFloat(te):M.test(te)?new Date(te):te===""?null:te):te)(Q=e.header?B>=P.length?"__parsed_extra":P[B]:Q,ee=e.transform?e.transform(ee,Q):ee);Q==="__parsed_extra"?(ie[Q]=ie[Q]||[],ie[Q].push(ee)):ie[Q]=ee}return e.header&&(B>P.length?me("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+B,ue+X):B<P.length&&me("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+B,ue+X)),ie}var q;S&&(e.header||e.dynamicTyping||e.transform)&&(q=1,!S.data.length||Array.isArray(S.data[0])?(S.data=S.data.map(Y),q=S.data.length):S.data=Y(S.data,0),e.header&&S.meta&&(S.meta.fields=P),ue+=q)}function de(){return e.header&&P.length===0}function me(j,Y,q,K){j={type:j,code:Y,message:q},K!==void 0&&(j.row=K),S.errors.push(j)}m(e.step)&&(v=e.step,e.step=function(j){S=j,de()?re():(re(),S.data.length!==0&&(C+=j.data.length,e.preview&&C>e.preview?r.abort():(S.data=S.data[0],v(S,F))))}),this.parse=function(j,Y,q){var K=e.quoteChar||'"',K=(e.newline||(e.newline=this.guessLineEndings(j,K)),d=!1,e.delimiter?m(e.delimiter)&&(e.delimiter=e.delimiter(j),S.meta.delimiter=e.delimiter):((K=((X,ie,B,Q,ee)=>{var Z,te,ae,xe;ee=ee||[",","	","|",";",u.RECORD_SEP,u.UNIT_SEP];for(var Se=0;Se<ee.length;Se++){for(var ke,he=ee[Se],Ee=0,le=0,be=0,ye=(ae=void 0,new H({comments:Q,delimiter:he,newline:ie,preview:10}).parse(X)),Ce=0;Ce<ye.data.length;Ce++)B&&oe(ye.data[Ce])?be++:(ke=ye.data[Ce].length,le+=ke,ae===void 0?ae=ke:0<ke&&(Ee+=Math.abs(ke-ae),ae=ke));0<ye.data.length&&(le/=ye.data.length-be),(te===void 0||Ee<=te)&&(xe===void 0||xe<le)&&1.99<le&&(te=Ee,Z=he,xe=le)}return{successful:!!(e.delimiter=Z),bestDelimiter:Z}})(j,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=K.bestDelimiter:(d=!0,e.delimiter=u.DefaultDelimiter),S.meta.delimiter=e.delimiter),T(e));return e.preview&&e.header&&K.preview++,n=j,r=new H(K),S=r.parse(n,Y,q),re(),R?{meta:{paused:!0}}:S||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,r.abort(),n=m(e.chunk)?"":n.substring(r.getCharIndex())},this.resume=function(){F.streamer._halted?(R=!1,F.streamer.parseChunk(n,!0)):setTimeout(F.resume,3)},this.aborted=function(){return E},this.abort=function(){E=!0,r.abort(),S.meta.aborted=!0,m(e.complete)&&e.complete(S),n=""},this.guessLineEndings=function(X,K){X=X.substring(0,1048576);var K=new RegExp(N(K)+"([^]*?)"+N(K),"gm"),q=(X=X.replace(K,"")).split("\r"),K=X.split(`
`),X=1<K.length&&K[0].length<q[0].length;if(q.length===1||X)return`
`;for(var ie=0,B=0;B<q.length;B++)q[B][0]===`
`&&ie++;return ie>=q.length/2?`\r
`:"\r"}}function N(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function H(e){var n=(e=e||{}).delimiter,r=e.newline,d=e.comments,v=e.step,L=e.preview,V=e.fastMode,J=null,M=e.quoteChar==null?'"':e.quoteChar,F=M;if(e.escapeChar!==void 0&&(F=e.escapeChar),(typeof n!="string"||-1<u.BAD_DELIMITERS.indexOf(n))&&(n=","),d===n)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<u.BAD_DELIMITERS.indexOf(d))&&(d=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var C=0,ue=!1;this.parse=function(R,E,P){if(typeof R!="string")throw new Error("Input must be a string");var S=R.length,oe=n.length,re=r.length,de=d.length,me=m(v),j=[],Y=[],q=[],K=C=0;if(!R)return he();if(V||V!==!1&&R.indexOf(M)===-1){for(var X=R.split(r),ie=0;ie<X.length;ie++){if(q=X[ie],C+=q.length,ie!==X.length-1)C+=r.length;else if(P)return he();if(!d||q.substring(0,de)!==d){if(me){if(j=[],ae(q.split(n)),Ee(),ue)return he()}else ae(q.split(n));if(L&&L<=ie)return j=j.slice(0,L),he(!0)}}return he()}for(var B=R.indexOf(n,C),Q=R.indexOf(r,C),ee=new RegExp(N(F)+N(M),"g"),Z=R.indexOf(M,C);;)if(R[C]===M)for(Z=C,C++;;){if((Z=R.indexOf(M,Z+1))===-1)return P||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:j.length,index:C}),Se();if(Z===S-1)return Se(R.substring(C,Z).replace(ee,M));if(M===F&&R[Z+1]===F)Z++;else if(M===F||Z===0||R[Z-1]!==F){B!==-1&&B<Z+1&&(B=R.indexOf(n,Z+1));var te=xe((Q=Q!==-1&&Q<Z+1?R.indexOf(r,Z+1):Q)===-1?B:Math.min(B,Q));if(R.substr(Z+1+te,oe)===n){q.push(R.substring(C,Z).replace(ee,M)),R[C=Z+1+te+oe]!==M&&(Z=R.indexOf(M,C)),B=R.indexOf(n,C),Q=R.indexOf(r,C);break}if(te=xe(Q),R.substring(Z+1+te,Z+1+te+re)===r){if(q.push(R.substring(C,Z).replace(ee,M)),ke(Z+1+te+re),B=R.indexOf(n,C),Z=R.indexOf(M,C),me&&(Ee(),ue))return he();if(L&&j.length>=L)return he(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:j.length,index:C}),Z++}}else if(d&&q.length===0&&R.substring(C,C+de)===d){if(Q===-1)return he();C=Q+re,Q=R.indexOf(r,C),B=R.indexOf(n,C)}else if(B!==-1&&(B<Q||Q===-1))q.push(R.substring(C,B)),C=B+oe,B=R.indexOf(n,C);else{if(Q===-1)break;if(q.push(R.substring(C,Q)),ke(Q+re),me&&(Ee(),ue))return he();if(L&&j.length>=L)return he(!0)}return Se();function ae(le){j.push(le),K=C}function xe(le){var be=0;return be=le!==-1&&(le=R.substring(Z+1,le))&&le.trim()===""?le.length:be}function Se(le){return P||(le===void 0&&(le=R.substring(C)),q.push(le),C=S,ae(q),me&&Ee()),he()}function ke(le){C=le,ae(q),q=[],Q=R.indexOf(r,C)}function he(le){if(e.header&&!E&&j.length){var be=j[0],ye={},Ce=new Set(be);let Ge=!1;for(let Te=0;Te<be.length;Te++){let we=be[Te];if(ye[we=m(e.transformHeader)?e.transformHeader(we,Te):we]){let Re,Je=ye[we];for(;Re=we+"_"+Je,Je++,Ce.has(Re););Ce.add(Re),be[Te]=Re,ye[we]++,Ge=!0,(J=J===null?{}:J)[Re]=we}else ye[we]=1,be[Te]=we;Ce.add(we)}Ge&&console.warn("Duplicate headers found and renamed.")}return{data:j,errors:Y,meta:{delimiter:n,linebreak:r,aborted:ue,truncated:!!le,cursor:K+(E||0),renamedHeaders:J}}}function Ee(){v(he()),j=[],Y=[]}},this.abort=function(){ue=!0},this.getCharIndex=function(){return C}}function W(e){var n=e.data,r=_[n.workerId],d=!1;if(n.error)r.userError(n.error,n.file);else if(n.results&&n.results.data){var v={abort:function(){d=!0,b(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:x,resume:x};if(m(r.userStep)){for(var L=0;L<n.results.data.length&&(r.userStep({data:n.results.data[L],errors:n.results.errors,meta:n.results.meta},v),!d);L++);delete n.results}else m(r.userChunk)&&(r.userChunk(n.results,v,n.file),delete n.results)}n.finished&&!d&&b(n.workerId,n.results)}function b(e,n){var r=_[e];m(r.userComplete)&&r.userComplete(n),r.terminate(),delete _[e]}function x(){throw new Error("Not implemented.")}function T(e){if(typeof e!="object"||e===null)return e;var n,r=Array.isArray(e)?[]:{};for(n in e)r[n]=T(e[n]);return r}function U(e,n){return function(){e.apply(n,arguments)}}function m(e){return typeof e=="function"}return u.parse=function(e,n){var r=(n=n||{}).dynamicTyping||!1;if(m(r)&&(n.dynamicTypingFunction=r,r={}),n.dynamicTyping=r,n.transform=!!m(n.transform)&&n.transform,!n.worker||!u.WORKERS_SUPPORTED)return r=null,u.NODE_STREAM_INPUT,typeof e=="string"?(e=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(e),r=new(n.download?y:p)(n)):e.readable===!0&&m(e.read)&&m(e.on)?r=new g(n):(a.File&&e instanceof File||e instanceof Object)&&(r=new f(n)),r.stream(e);(r=(()=>{var d;return!!u.WORKERS_SUPPORTED&&(d=(()=>{var v=a.URL||a.webkitURL||null,L=s.toString();return u.BLOB_URL||(u.BLOB_URL=v.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",L,")();"],{type:"text/javascript"})))})(),(d=new a.Worker(d)).onmessage=W,d.id=w++,_[d.id]=d)})()).userStep=n.step,r.userChunk=n.chunk,r.userComplete=n.complete,r.userError=n.error,n.step=m(n.step),n.chunk=m(n.chunk),n.complete=m(n.complete),n.error=m(n.error),delete n.worker,r.postMessage({input:e,config:n,workerId:r.id})},u.unparse=function(e,n){var r=!1,d=!0,v=",",L=`\r
`,V='"',J=V+V,M=!1,F=null,C=!1,ue=((()=>{if(typeof n=="object"){if(typeof n.delimiter!="string"||u.BAD_DELIMITERS.filter(function(P){return n.delimiter.indexOf(P)!==-1}).length||(v=n.delimiter),typeof n.quotes!="boolean"&&typeof n.quotes!="function"&&!Array.isArray(n.quotes)||(r=n.quotes),typeof n.skipEmptyLines!="boolean"&&typeof n.skipEmptyLines!="string"||(M=n.skipEmptyLines),typeof n.newline=="string"&&(L=n.newline),typeof n.quoteChar=="string"&&(V=n.quoteChar),typeof n.header=="boolean"&&(d=n.header),Array.isArray(n.columns)){if(n.columns.length===0)throw new Error("Option columns is empty");F=n.columns}n.escapeChar!==void 0&&(J=n.escapeChar+V),n.escapeFormulae instanceof RegExp?C=n.escapeFormulae:typeof n.escapeFormulae=="boolean"&&n.escapeFormulae&&(C=/^[=+\-@\t\r].*$/)}})(),new RegExp(N(V),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return R(null,e,M);if(typeof e[0]=="object")return R(F||Object.keys(e[0]),e,M)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||F),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),R(e.fields||[],e.data||[],M);throw new Error("Unable to serialize unrecognized input");function R(P,S,oe){var re="",de=(typeof P=="string"&&(P=JSON.parse(P)),typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(P)&&0<P.length),me=!Array.isArray(S[0]);if(de&&d){for(var j=0;j<P.length;j++)0<j&&(re+=v),re+=E(P[j],j);0<S.length&&(re+=L)}for(var Y=0;Y<S.length;Y++){var q=(de?P:S[Y]).length,K=!1,X=de?Object.keys(S[Y]).length===0:S[Y].length===0;if(oe&&!de&&(K=oe==="greedy"?S[Y].join("").trim()==="":S[Y].length===1&&S[Y][0].length===0),oe==="greedy"&&de){for(var ie=[],B=0;B<q;B++){var Q=me?P[B]:B;ie.push(S[Y][Q])}K=ie.join("").trim()===""}if(!K){for(var ee=0;ee<q;ee++){0<ee&&!X&&(re+=v);var Z=de&&me?P[ee]:ee;re+=E(S[Y][Z],ee)}Y<S.length-1&&(!oe||0<q&&!X)&&(re+=L)}}return re}function E(P,S){var oe,re;return P==null?"":P.constructor===Date?JSON.stringify(P).slice(1,25):(re=!1,C&&typeof P=="string"&&C.test(P)&&(P="'"+P,re=!0),oe=P.toString().replace(ue,J),(re=re||r===!0||typeof r=="function"&&r(P,S)||Array.isArray(r)&&r[S]||((de,me)=>{for(var j=0;j<me.length;j++)if(-1<de.indexOf(me[j]))return!0;return!1})(oe,u.BAD_DELIMITERS)||-1<oe.indexOf(v)||oe.charAt(0)===" "||oe.charAt(oe.length-1)===" ")?V+oe+V:oe)}},u.RECORD_SEP="",u.UNIT_SEP="",u.BYTE_ORDER_MARK="\uFEFF",u.BAD_DELIMITERS=["\r",`
`,'"',u.BYTE_ORDER_MARK],u.WORKERS_SUPPORTED=!o&&!!a.Worker,u.NODE_STREAM_INPUT=1,u.LocalChunkSize=10485760,u.RemoteChunkSize=5242880,u.DefaultDelimiter=",",u.Parser=H,u.ParserHandle=k,u.NetworkStreamer=y,u.FileStreamer=f,u.StringStreamer=p,u.ReadableStreamStreamer=g,a.jQuery&&((l=a.jQuery).fn.parse=function(e){var n=e.config||{},r=[];return this.each(function(L){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)r.push({file:this.files[V],inputElem:this,instanceConfig:l.extend({},n)})}),d(),this;function d(){if(r.length===0)m(e.complete)&&e.complete();else{var L,V,J,M,F=r[0];if(m(e.before)){var C=e.before(F.file,F.inputElem);if(typeof C=="object"){if(C.action==="abort")return L="AbortError",V=F.file,J=F.inputElem,M=C.reason,void(m(e.error)&&e.error({name:L},V,J,M));if(C.action==="skip")return void v();typeof C.config=="object"&&(F.instanceConfig=l.extend(F.instanceConfig,C.config))}else if(C==="skip")return void v()}var ue=F.instanceConfig.complete;F.instanceConfig.complete=function(R){m(ue)&&ue(R,F.file,F.inputElem),v()},u.parse(F.file,F.instanceConfig)}}function v(){r.splice(0,1),d()}}),c&&(a.onmessage=function(e){e=e.data,u.WORKER_ID===void 0&&e&&(u.WORKER_ID=e.workerId),typeof e.input=="string"?a.postMessage({workerId:u.WORKER_ID,results:u.parse(e.input,e.config),finished:!0}):(a.File&&e.input instanceof File||e.input instanceof Object)&&(e=u.parse(e.input,e.config))&&a.postMessage({workerId:u.WORKER_ID,results:e,finished:!0})}),(y.prototype=Object.create(h.prototype)).constructor=y,(f.prototype=Object.create(h.prototype)).constructor=f,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(h.prototype)).constructor=g,u})})(_t);var jt=_t.exports;const Ht=zt(jt);var vt={exports:{}};/*! streamsaver. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */(function(i){((t,s)=>{i.exports=s()})("streamSaver",()=>{const t=typeof window=="object"?window:this;t.HTMLElement||console.warn("streamsaver is meant to run on browsers main thread");let s=null,a=!1;const l=g=>{try{g()}catch{}},o=t.WebStreamsPolyfill||{},c=t.isSecureContext;let _=/constructor/i.test(t.HTMLElement)||!!t.safari||!!t.WebKitPoint;const w=c||"MozAppearance"in document.documentElement.style?"iframe":"navigate",u={createWriteStream:p,WritableStream:t.WritableStream||o.WritableStream,supported:!0,version:{full:"2.0.5",major:2,minor:0,dot:5},mitm:"https://jimmywarting.github.io/StreamSaver.js/mitm.html?version=2.0.0"};function h(g){if(!g)throw new Error("meh");const k=document.createElement("iframe");return k.hidden=!0,k.src=g,k.loaded=!1,k.name="iframe",k.isIframe=!0,k.postMessage=(...N)=>k.contentWindow.postMessage(...N),k.addEventListener("load",()=>{k.loaded=!0},{once:!0}),document.body.appendChild(k),k}function y(g){const k="width=200,height=100",N=document.createDocumentFragment(),H={frame:t.open(g,"popup",k),loaded:!1,isIframe:!1,isPopup:!0,remove(){H.frame.close()},addEventListener(...b){N.addEventListener(...b)},dispatchEvent(...b){N.dispatchEvent(...b)},removeEventListener(...b){N.removeEventListener(...b)},postMessage(...b){H.frame.postMessage(...b)}},W=b=>{b.source===H.frame&&(H.loaded=!0,t.removeEventListener("message",W),H.dispatchEvent(new Event("load")))};return t.addEventListener("message",W),H}try{new Response(new ReadableStream),c&&!("serviceWorker"in navigator)&&(_=!0)}catch{_=!0}l(()=>{const{readable:g}=new TransformStream,k=new MessageChannel;k.port1.postMessage(g,[g]),k.port1.close(),k.port2.close(),a=!0,Object.defineProperty(u,"TransformStream",{configurable:!1,writable:!1,value:TransformStream})});function f(){s||(s=c?h(u.mitm):y(u.mitm))}function p(g,k,N){let H={size:null,pathname:null,writableStrategy:void 0,readableStrategy:void 0},W=0,b=null,x=null,T=null;if(Number.isFinite(k)?([N,k]=[k,N],console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),H.size=N,H.writableStrategy=k):k&&k.highWaterMark?(console.warn("[StreamSaver] Deprecated pass an object as 2nd argument when creating a write stream"),H.size=N,H.writableStrategy=k):H=k||{},!_){f(),x=new MessageChannel,g=encodeURIComponent(g.replace(/\//g,":")).replace(/['()]/g,escape).replace(/\*/g,"%2A");const m={transferringReadable:a,pathname:H.pathname||Math.random().toString().slice(-6)+"/"+g,headers:{"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename*=UTF-8''"+g}};H.size&&(m.headers["Content-Length"]=H.size);const e=[m,"*",[x.port2]];if(a){const n=w==="iframe"?void 0:{transform(d,v){if(!(d instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");W+=d.length,v.enqueue(d),b&&(location.href=b,b=null)},flush(){b&&(location.href=b)}};T=new u.TransformStream(n,H.writableStrategy,H.readableStrategy);const r=T.readable;x.port1.postMessage({readableStream:r},[r])}x.port1.onmessage=n=>{n.data.download?w==="navigate"?(s.remove(),s=null,W?location.href=n.data.download:b=n.data.download):(s.isPopup&&(s.remove(),s=null,w==="iframe"&&h(u.mitm)),h(n.data.download)):n.data.abort&&(U=[],x.port1.postMessage("abort"),x.port1.onmessage=null,x.port1.close(),x.port2.close(),x=null)},s.loaded?s.postMessage(...e):s.addEventListener("load",()=>{s.postMessage(...e)},{once:!0})}let U=[];return!_&&T&&T.writable||new u.WritableStream({write(m){if(!(m instanceof Uint8Array))throw new TypeError("Can only write Uint8Arrays");if(_){U.push(m);return}x.port1.postMessage(m),W+=m.length,b&&(location.href=b,b=null)},close(){if(_){const m=new Blob(U,{type:"application/octet-stream; charset=utf-8"}),e=document.createElement("a");e.href=URL.createObjectURL(m),e.download=g,e.click()}else x.port1.postMessage("end")},abort(){U=[],x.port1.postMessage("abort"),x.port1.onmessage=null,x.port1.close(),x.port2.close(),x=null}},H.writableStrategy)}return u})})(vt);var Ft=vt.exports;function ot(i,t,s){const a=i.slice();return a[9]=t[s],a}function ct(i){let t,s=i[9]+"",a;return{c(){t=A("span"),a=Ue(s),this.h()},l(l){t=z(l,"SPAN",{class:!0});var o=$(t);a=Ve(o,s),o.forEach(I),this.h()},h(){D(t,"class","chip variant-filled hover:variant-soft-surface mr-1 mb-1")},m(l,o){G(l,t,o),O(t,a)},p(l,o){o&2&&s!==(s=l[9]+"")&&pt(a,s)},d(l){l&&I(t)}}}function Pt(i){let t,s,a,l="With",o,c,_,w,u=Pe(i[1]),h=[];for(let y=0;y<u.length;y+=1)h[y]=ct(ot(i,u,y));return{c(){t=A("div"),s=A("div"),a=A("span"),a.textContent=l,o=ne(),c=A("div"),_=ne(),w=A("div");for(let y=0;y<h.length;y+=1)h[y].c();this.h()},l(y){t=z(y,"DIV",{class:!0});var f=$(t);s=z(f,"DIV",{class:!0});var p=$(s);a=z(p,"SPAN",{"data-svelte-h":!0}),ce(a)!=="svelte-g4ew0a"&&(a.textContent=l),o=se(p),c=z(p,"DIV",{class:!0,contenteditable:!0}),$(c).forEach(I),p.forEach(I),_=se(f),w=z(f,"DIV",{class:!0});var g=$(w);for(let k=0;k<h.length;k+=1)h[k].l(g);g.forEach(I),f.forEach(I),this.h()},h(){D(c,"class","w-full border-b-2 border-gray-300 p-2 min-h-10 bg-surface-700"),D(c,"contenteditable","true"),D(s,"class","label"),D(w,"class","flex flex-wrap"),D(t,"class","flex flex-col space-y-2 w-full min-w-64")},m(y,f){G(y,t,f),O(t,s),O(s,a),O(s,o),O(s,c),i[2](c),O(t,_),O(t,w);for(let p=0;p<h.length;p+=1)h[p]&&h[p].m(w,null)},p(y,[f]){if(f&2){u=Pe(y[1]);let p;for(p=0;p<u.length;p+=1){const g=ot(y,u,p);h[p]?h[p].p(g,f):(h[p]=ct(g),h[p].c(),h[p].m(w,null))}for(;p<h.length;p+=1)h[p].d(1);h.length=u.length}},i:ve,o:ve,d(y){y&&I(t),i[2](null),ht(h,y)}}}function Ut(i,t,s){let{columns:a=[]}=t,{contenteditableDiv:l=null}=t,o=null;function c(){const f=window.getSelection();if(!f||f.rangeCount===0)return;const p=f.getRangeAt(0);if(l&&l.contains(p.commonAncestorContainer)){let g=p.commonAncestorContainer;g.nodeType===Node.TEXT_NODE&&(g=g.parentElement),g&&g.classList.contains("chip")?o=null:o=p}}function _(){const f=window.getSelection();f&&o&&(f.removeAllRanges(),f.addRange(o))}function w(f){if(l){if(o){const p=document.createElement("div");p.innerHTML=f;const g=document.createDocumentFragment();for(;p.firstChild;)g.appendChild(p.firstChild);o.deleteContents(),o.insertNode(g),o.collapse(!1),_()}else{const p=document.createElement("div");for(p.innerHTML=f;p.firstChild;)l.appendChild(p.firstChild)}l.focus()}}function u(f){if(!l)return;const p=window.getSelection();if(!p||!p.anchorNode)return;const g=p.anchorNode.parentElement;g&&g.classList.contains("chip")&&(f.key==="Backspace"||f.key==="Delete")&&(f.preventDefault(),g.remove())}function h(){document.querySelectorAll(".chip").forEach(p=>{p.addEventListener("click",()=>{const g=`<span class="chip variant-filled py-1" contenteditable="false">${p.textContent}</span>`;w(g)})})}wt(()=>{h(),l&&(l.addEventListener("keydown",u),l.addEventListener("mouseup",c),l.addEventListener("keyup",c),l.addEventListener("click",c))});function y(f){Le[f?"unshift":"push"](()=>{l=f,s(0,l)})}return i.$$set=f=>{"columns"in f&&s(1,a=f.columns),"contenteditableDiv"in f&&s(0,l=f.contenteditableDiv)},[l,a,y]}class Vt extends Ie{constructor(t){super(),Me(this,t,Ut,Pt,De,{columns:1,contenteditableDiv:0})}}function ut(i,t,s){const a=i.slice();return a[3]=t[s],a}function ft(i){let t,s=i[3]+"",a,l;return{c(){t=A("option"),a=Ue(s),this.h()},l(o){t=z(o,"OPTION",{});var c=$(t);a=Ve(c,s),c.forEach(I),this.h()},h(){t.__value=l=i[3],nt(t,t.__value)},m(o,c){G(o,t,c),O(t,a)},p(o,c){c&2&&s!==(s=o[3]+"")&&pt(a,s),c&2&&l!==(l=o[3])&&(t.__value=l,nt(t,t.__value))},d(o){o&&I(t)}}}function Nt(i){let t,s,a="Replace",l,o,c,_,w=Pe(i[1]),u=[];for(let h=0;h<w.length;h+=1)u[h]=ft(ut(i,w,h));return{c(){t=A("label"),s=A("span"),s.textContent=a,l=ne(),o=A("select");for(let h=0;h<u.length;h+=1)u[h].c();this.h()},l(h){t=z(h,"LABEL",{class:!0});var y=$(t);s=z(y,"SPAN",{"data-svelte-h":!0}),ce(s)!=="svelte-1riidpu"&&(s.textContent=a),l=se(y),o=z(y,"SELECT",{class:!0});var f=$(o);for(let p=0;p<u.length;p+=1)u[p].l(f);f.forEach(I),y.forEach(I),this.h()},h(){D(o,"class","select"),i[0]===void 0&&kt(()=>i[2].call(o)),D(t,"class","label")},m(h,y){G(h,t,y),O(t,s),O(t,l),O(t,o);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(o,null);tt(o,i[0],!0),c||(_=fe(o,"change",i[2]),c=!0)},p(h,[y]){if(y&2){w=Pe(h[1]);let f;for(f=0;f<w.length;f+=1){const p=ut(h,w,f);u[f]?u[f].p(p,y):(u[f]=ft(p),u[f].c(),u[f].m(o,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=w.length}y&3&&tt(o,h[0])},i:ve,o:ve,d(h){h&&I(t),ht(u,h),c=!1,_()}}}function Bt(i,t,s){let{columns:a=[]}=t,{value:l=a[0]}=t;function o(){l=Et(this),s(0,l),s(1,a)}return i.$$set=c=>{"columns"in c&&s(1,a=c.columns),"value"in c&&s(0,l=c.value)},[l,a,o]}class Wt extends Ie{constructor(t){super(),Me(this,t,Bt,Nt,De,{columns:1,value:0})}}function qt(i){let t,s,a,l,o="What Does This App Do?",c,_,w='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>',u,h,y="Replace is a client-side webapp that allows you to perform multiple find and replace operations on text files. Using a TSV or CSV file as a map, you can define search keys and replacement values to update text in one or more files.",f,p,g,k,N="How to Use the Replace App",H,W,b='<li><strong>Load Your Map File:</strong> <ul class="list-disc list-inside ml-5"><li>Drag and drop a CSV or TSV file into the designated area or use the file picker.</li> <li>The app will parse your file and display the columns available for selection.</li></ul></li> <li><strong>Select an Index Column:</strong> <p>Choose the column that contains the terms you want to find (the search keys).</p></li> <li><strong>Define Replacement Logic:</strong> <p>Use the Replace Bar to specify how text should be replaced. Dynamic replacements can be created using placeholders from your map file columns.</p></li> <li><strong>Upload Files to Process:</strong> <p>Add the files you want to modify by dropping them into the app or selecting them manually.</p></li> <li><strong>Apply Replacements:</strong> <p>For each row in your map file a replacement will be performed. The app will process each file line by line, applying your replacement logic efficiently.</p></li> <li><strong>Download Updated Files:</strong> <p>Once processed, the app saves the updated files directly to your system.</p></li>',x,T,U,m,e="Found a bug?",n,r,d='Please report any issues or suggestions on the <a href="https://github.com/Wytamma/replace" target="_blank" class="text-primary-500 hover:underline">GitHub repository</a>.',v,L;return{c(){t=A("div"),s=A("div"),a=A("div"),l=A("h2"),l.textContent=o,c=ne(),_=A("button"),_.innerHTML=w,u=ne(),h=A("p"),h.textContent=y,f=ne(),p=A("hr"),g=ne(),k=A("h2"),k.textContent=N,H=ne(),W=A("ol"),W.innerHTML=b,x=ne(),T=A("hr"),U=ne(),m=A("h2"),m.textContent=e,n=ne(),r=A("p"),r.innerHTML=d,this.h()},l(V){t=z(V,"DIV",{class:!0});var J=$(t);s=z(J,"DIV",{class:!0});var M=$(s);a=z(M,"DIV",{class:!0});var F=$(a);l=z(F,"H2",{class:!0,"data-svelte-h":!0}),ce(l)!=="svelte-14nojxv"&&(l.textContent=o),c=se(F),_=z(F,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(_)!=="svelte-1t6j3oi"&&(_.innerHTML=w),F.forEach(I),u=se(M),h=z(M,"P",{class:!0,"data-svelte-h":!0}),ce(h)!=="svelte-1h4wsc7"&&(h.textContent=y),f=se(M),p=z(M,"HR",{class:!0}),g=se(M),k=z(M,"H2",{class:!0,"data-svelte-h":!0}),ce(k)!=="svelte-18b32tu"&&(k.textContent=N),H=se(M),W=z(M,"OL",{class:!0,"data-svelte-h":!0}),ce(W)!=="svelte-1w41ubx"&&(W.innerHTML=b),x=se(M),T=z(M,"HR",{class:!0}),U=se(M),m=z(M,"H2",{class:!0,"data-svelte-h":!0}),ce(m)!=="svelte-qz5xqw"&&(m.textContent=e),n=se(M),r=z(M,"P",{class:!0,"data-svelte-h":!0}),ce(r)!=="svelte-1izv8fm"&&(r.innerHTML=d),M.forEach(I),J.forEach(I),this.h()},h(){D(l,"class","h2"),D(_,"class","text-surface-500 hover:text-surface-400"),D(a,"class","flex justify-between"),D(h,"class","mt-4"),D(p,"class","my-6 border-gray-300"),D(k,"class","text-2xl font-semibold "),D(W,"class","list-decimal list-inside mt-4 space-y-4"),D(T,"class","my-6 border-gray-300"),D(m,"class","text-2xl font-semibold "),D(r,"class","mt-4 "),D(s,"class","max-h-dvh overflow-y-auto p-4 pb-8"),D(t,"class","card w-modal shadow-xl space-y-4")},m(V,J){G(V,t,J),O(t,s),O(s,a),O(a,l),O(a,c),O(a,_),O(s,u),O(s,h),O(s,f),O(s,p),O(s,g),O(s,k),O(s,H),O(s,W),O(s,x),O(s,T),O(s,U),O(s,m),O(s,n),O(s,r),v||(L=fe(_,"click",i[1]),v=!0)},p:ve,i:ve,o:ve,d(V){V&&I(t),v=!1,L()}}}function Kt(i){const t=mt();return[t,()=>t.close()]}class Zt extends Ie{constructor(t){super(),Me(this,t,Kt,qt,De,{})}}function Qt(i){let t,s,a="Select a column to use as the search value and create a replacement pattern",l,o,c='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-6"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"></path></svg>',_,w,u,h,y,f,p,g,k,N,H,W,b;function x(r){i[12](r)}let T={name:"files",$$slots:{message:[Yt],lead:[Jt]},$$scope:{ctx:i}};i[1]!==void 0&&(T.files=i[1]),w=new gt({props:T}),Le.push(()=>Ae(w,"files",x)),w.$on("change",i[8]),w.$on("click",dt),w.$on("drop",dt);function U(r){i[13](r)}let m={columns:i[4]};i[2]!==void 0&&(m.value=i[2]),y=new Wt({props:m}),Le.push(()=>Ae(y,"value",U));function e(r){i[14](r)}let n={columns:i[4]};return i[3]!==void 0&&(n.contenteditableDiv=i[3]),k=new Vt({props:n}),Le.push(()=>Ae(k,"contenteditableDiv",e)),{c(){t=A("div"),s=A("div"),s.textContent=a,l=ne(),o=A("button"),o.innerHTML=c,_=ne(),ze(w.$$.fragment),h=ne(),ze(y.$$.fragment),p=ne(),g=A("div"),ze(k.$$.fragment),this.h()},l(r){t=z(r,"DIV",{class:!0});var d=$(t);s=z(d,"DIV",{"data-svelte-h":!0}),ce(s)!=="svelte-949uw6"&&(s.textContent=a),l=se(d),o=z(d,"BUTTON",{class:!0,"data-svelte-h":!0}),ce(o)!=="svelte-qg5vvh"&&(o.innerHTML=c),d.forEach(I),_=se(r),je(w.$$.fragment,r),h=se(r),je(y.$$.fragment,r),p=se(r),g=z(r,"DIV",{class:!0});var v=$(g);je(k.$$.fragment,v),v.forEach(I),this.h()},h(){D(o,"class","text-surface-500 hover:text-surface-400"),D(t,"class","flex justify-between items-center"),D(g,"class","flex space-x-5")},m(r,d){G(r,t,d),O(t,s),O(t,l),O(t,o),G(r,_,d),He(w,r,d),G(r,h,d),He(y,r,d),G(r,p,d),G(r,g,d),He(k,g,null),H=!0,W||(b=fe(o,"click",i[11]),W=!0)},p(r,d){const v={};d&262144&&(v.$$scope={dirty:d,ctx:r}),!u&&d&2&&(u=!0,v.files=r[1],Oe(()=>u=!1)),w.$set(v);const L={};d&16&&(L.columns=r[4]),!f&&d&4&&(f=!0,L.value=r[2],Oe(()=>f=!1)),y.$set(L);const V={};d&16&&(V.columns=r[4]),!N&&d&8&&(N=!0,V.contenteditableDiv=r[3],Oe(()=>N=!1)),k.$set(V)},i(r){H||(pe(w.$$.fragment,r),pe(y.$$.fragment,r),pe(k.$$.fragment,r),H=!0)},o(r){ge(w.$$.fragment,r),ge(y.$$.fragment,r),ge(k.$$.fragment,r),H=!1},d(r){r&&(I(t),I(_),I(h),I(p),I(g)),Fe(w,r),Fe(y,r),Fe(k),W=!1,b()}}}function Gt(i){let t,s='<span class="text-6xl sm:text-8xl">🔎</span> <span class="text-4xl sm:text-5xl px-4">➡️</span> <span class="text-6xl sm:text-8xl">✏️</span>',a,l,o="<p>Use a CSV/TSV to perform multiple find and replace operations</p>",c,_,w,u,h,y,f,p="Read the docs",g,k,N;function H(b){i[9](b)}let W={name:"mapFile",accept:".tsv,.csv",$$slots:{meta:[en],message:[$t],lead:[Xt]},$$scope:{ctx:i}};return i[0]!==void 0&&(W.files=i[0]),w=new gt({props:W}),Le.push(()=>Ae(w,"files",H)),w.$on("change",i[7]),{c(){t=A("div"),t.innerHTML=s,a=ne(),l=A("div"),l.innerHTML=o,c=ne(),_=A("div"),ze(w.$$.fragment),h=ne(),y=A("div"),f=A("button"),f.textContent=p,this.h()},l(b){t=z(b,"DIV",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1y2qos1"&&(t.innerHTML=s),a=se(b),l=z(b,"DIV",{class:!0,"data-svelte-h":!0}),ce(l)!=="svelte-1qb3ijv"&&(l.innerHTML=o),c=se(b),_=z(b,"DIV",{class:!0});var x=$(_);je(w.$$.fragment,x),h=se(x),y=z(x,"DIV",{class:!0});var T=$(y);f=z(T,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ce(f)!=="svelte-mv0pu5"&&(f.textContent=p),T.forEach(I),x.forEach(I),this.h()},h(){D(t,"class","flex justify-center items-center space-x-2 align-middle"),D(l,"class","flex align-middle justify-center items-center text-center"),D(f,"type","button"),D(f,"class","text-surface-500 hover:text-surface-400 text-md"),D(y,"class","flex justify-end mt-2"),D(_,"class","flex flex-col w-full ")},m(b,x){G(b,t,x),G(b,a,x),G(b,l,x),G(b,c,x),G(b,_,x),He(w,_,null),O(_,h),O(_,y),O(y,f),g=!0,k||(N=fe(f,"click",i[10]),k=!0)},p(b,x){const T={};x&262144&&(T.$$scope={dirty:x,ctx:b}),!u&&x&1&&(u=!0,T.files=b[0],Oe(()=>u=!1)),w.$set(T)},i(b){g||(pe(w.$$.fragment,b),g=!0)},o(b){ge(w.$$.fragment,b),g=!1},d(b){b&&(I(t),I(a),I(l),I(c),I(_)),Fe(w),k=!1,N()}}}function Jt(i){let t,s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-16"><path fill-rule="evenodd" d="M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z" clip-rule="evenodd"></path><path d="M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"></path></svg>';return{c(){t=A("div"),t.innerHTML=s,this.h()},l(a){t=z(a,"DIV",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1j7iz53"&&(t.innerHTML=s),this.h()},h(){D(t,"class","flex justify-center")},m(a,l){G(a,t,l)},p:ve,d(a){a&&I(t)}}}function Yt(i){let t,s='<span class="font-semibold">Add files</span> to replace';return{c(){t=A("p"),t.innerHTML=s,this.h()},l(a){t=z(a,"P",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-wv6rcn"&&(t.innerHTML=s),this.h()},h(){D(t,"class","text-lg")},m(a,l){G(a,t,l)},p:ve,d(a){a&&I(t)}}}function Xt(i){let t,s='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-16"><path fill-rule="evenodd" d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875Zm6.905 9.97a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72V18a.75.75 0 0 0 1.5 0v-4.19l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z" clip-rule="evenodd"></path><path d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z"></path></svg>';return{c(){t=A("div"),t.innerHTML=s,this.h()},l(a){t=z(a,"DIV",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-1w766if"&&(t.innerHTML=s),this.h()},h(){D(t,"class","flex justify-center")},m(a,l){G(a,t,l)},p:ve,d(a){a&&I(t)}}}function $t(i){let t,s='<span class="font-semibold">Load a file</span> or drag and drop';return{c(){t=A("p"),t.innerHTML=s,this.h()},l(a){t=z(a,"P",{class:!0,"data-svelte-h":!0}),ce(t)!=="svelte-13s4mf4"&&(t.innerHTML=s),this.h()},h(){D(t,"class","text-lg")},m(a,l){G(a,t,l)},p:ve,d(a){a&&I(t)}}}function en(i){let t;return{c(){t=Ue("TSV & CSV allowed.")},l(s){t=Ve(s,"TSV & CSV allowed.")},m(s,a){G(s,t,a)},d(s){s&&I(t)}}}function tn(i){let t,s,a,l,o,c,_="Your files never leave your computer",w;const u=[Gt,Qt],h=[];function y(f,p){return f[4]===void 0?0:1}return a=y(i),l=h[a]=u[a](i),{c(){t=A("div"),s=A("div"),l.c(),o=ne(),c=A("div"),c.textContent=_,this.h()},l(f){t=z(f,"DIV",{class:!0});var p=$(t);s=z(p,"DIV",{class:!0});var g=$(s);l.l(g),g.forEach(I),o=se(p),c=z(p,"DIV",{class:!0,"data-svelte-h":!0}),ce(c)!=="svelte-12obltv"&&(c.textContent=_),p.forEach(I),this.h()},h(){D(s,"class","max-w-2xl space-y-5 w-full"),D(c,"class","absolute bottom-0 p-2 text-xs text-gray-500"),D(t,"class","h-full flex justify-center items-center mx-2")},m(f,p){G(f,t,p),O(t,s),h[a].m(s,null),O(t,o),O(t,c),w=!0},p(f,[p]){let g=a;a=y(f),a===g?h[a].p(f,p):(Be(),ge(h[g],1,1,()=>{h[g]=null}),We(),l=h[a],l?l.p(f,p):(l=h[a]=u[a](f),l.c()),pe(l,1),l.m(s,null))},i(f){w||(pe(l),w=!0)},o(f){ge(l),w=!1},d(f){f&&I(t),h[a].d()}}}function nn(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dt(){const i=document.getElementsByName("files")[0];i.value=""}function sn(i,t,s){const a=mt(),o={type:"component",component:{ref:Zt},title:"Example Alert",body:"This is an example modal.",image:"https://i.imgur.com/WOgTG96.gif"};let c,_,w,u=null,h,y=[];async function f(){const T=c==null?void 0:c[0];if(!T)return;const U=new FileReader;U.onload=m=>{var e;(e=m.target)!=null&&e.result&&Ht.parse(m.target.result,{header:!0,skipEmptyLines:!0,complete:n=>{console.log("Parsed data:",n.data),n.data.length>0&&s(4,h=Object.keys(n.data[0])),y=n.data},error:n=>{console.error("Error parsing CSV:",n),s(4,h=[])}})},U.onerror=m=>{console.error("Error reading file:",m)},U.readAsText(T)}function p(T,U){let m="";for(let e=0;e<T.length;e++){const n=T[e];if(n instanceof HTMLElement){const r=n.innerHTML;if(!(h!=null&&h.includes(r)))throw new Error(`Column ${r} not found in map file`);let d=U[n.innerHTML];d==null&&(d=""),m+=d}else n instanceof Text&&n.textContent&&(m+=n.textContent)}return m}async function g(){if(console.log(_),!_||!u||u===null)return;const T=Object.fromEntries(y.map(m=>{if(!u)throw new Error("replaceDiv is not defined");const e=p(u.childNodes,m),n=m[w];if(!n)throw new Error("Index column not found");return[n,e]})),U=new RegExp(Object.keys(T).map(m=>nn(m)).join("|"),"g");for(let m=0;m<_.length;m++){const e=_[m],r=Ft.createWriteStream(e.name,{size:e.size}).getWriter(),d=e.stream().getReader(),v=new TextDecoder,L=new TextEncoder;let V="";try{for(;;){const{value:J,done:M}=await d.read();if(M)break;const C=(V+v.decode(J,{stream:!0})).split(`
`);V=C.pop()||"";const R=C.join(`
`).replace(U,P=>T[P]),E=L.encode(R+`
`);await r.write(E)}if(V){const J=V.replace(U,F=>T[F]),M=L.encode(J);await r.write(M)}}finally{d.releaseLock(),r.close()}}}function k(T){c=T,s(0,c)}const N=()=>a.trigger(o),H=()=>s(4,h=void 0);function W(T){_=T,s(1,_)}function b(T){w=T,s(2,w)}function x(T){u=T,s(3,u)}return[c,_,w,u,h,a,o,f,g,k,N,H,W,b,x]}class on extends Ie{constructor(t){super(),Me(this,t,sn,tn,De,{})}}export{on as component};
